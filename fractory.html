
<!-- saved from url=(0036)https://jamuspsi.github.io/fractory/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<script async="" src="./fractory_files/analytics.js"></script><script type="text/javascript" src="./fractory_files/jquery-1.10.2.js"></script>
	<script type="text/javascript" src="./fractory_files/classy.js"></script>
	<link href="./fractory_files/jquery-ui-1.10.3.custom.css" rel="stylesheet">
	<link href="./fractory_files/jquery.qtip.css" rel="stylesheet">
	<script src="./fractory_files/jquery-ui-1.10.3.custom.js"></script>
	<script src="./fractory_files/underscore.js"></script>

	<link rel="stylesheet" type="text/css" href="./fractory_files/game-icons.css">
	<link rel="stylesheet/less" type="text/css" href="./fractory_files/style.less"><style type="text/css" id="less:fractory-less-style">body {
  color: white;
  background-color: #222;
}
scene_holder {
  width: 910px;
  height: 620px;
}
.qtip{
    min-width: 400px;
}
.scene {
  border: 1px dotted white;
  position: relative;
  width: 910px;
  height: 620px;
}
.shell {
  border: 1px dotted red;
  position: absolute;
}
.shell .links {
  position: absolute;
  overflow: hidden;
  width: 720px;
  height: 640px;
}
.shell_holder {
  position: relative;
  width: 720px;
  height: 640px;
  float: left;
  margin-left: 10px;
  margin-right: 10px;
}
.inventory_holder {
  width: 230px;
  float: left;
}

.part_sandbox{
    width: 1190px;
}
.inventory_holder .inventory_label {
  font-size: 18pt;
  font-weight: bold;
  text-align: center;
  padding-bottom: 3px;
}
.shop_bar {
  width: 200px;
  float: left;
}
.shop_bar .shop_label {
  font-size: 18pt;
  font-weight: bold;
  text-align: center;
  padding-bottom: 3px;
}
.shop_price {
  font-size: 10pt;
}
.shop_bar .shop_slot_label {
  text-decoration: underline;
  text-align: center;
}
.shop_bar .shop_slot_holder .shop_entry {
  text-align: center;
  background-color: #444;
  float: left;
  margin-right: 4px;
  margin-bottom: 4px;
  width: 83px;
  height: 145px;
  padding: 1px;
}
.shop_bar .shop_slot_holder .shop_entry .shop_slot {
  position: relative;
  width: 60px;
  height: 60px;
  display: inline-block;
}
.shop_bar .shop_slot_holder button {
  padding: 1px 1px;
  font-size: 8pt;
  font-weight: bold;
}
.ui-dialog-title {
  font-size: 8pt !important;
  margin: 2px !important;
}
.ui-dialog-titlebar {
  padding: 4px 5px !important;
}
.node {
  z-index: 1;
  border: 1px dotted green;
  position: absolute;
}
.part_holder {
  position: absolute;
  width: 60px;
  height: 60px;
  top: 0px;
  left: 0px;
}
.part {
  position: absolute !important;
  left: 0;
  top: 0;
  width: 60px;
  height: 60px;
}
.inventory_slot {
  position: relative;
  width: 60px;
  height: 60px;
  border: 2px dotted orange;
  margin-right: 10px;
  margin-top: 10px;
  display: inline-block;
}
.trash_slot {
  position: relative;
  width: 60px;
  height: 60px;
  border: 2px dotted red;
  margin-right: 10px;
  margin-top: 10px;
  display: inline-block;
  background-color: rgba(255, 225, 225, 0.8);
}
.link {
  background-color: rgba(0, 255, 255, 0.1);
  position: absolute;
  overflow: hidden;
}
.link.active {
  background-color: rgba(0, 255, 128, 0.5);
}
.link.active.side {
  background-color: rgba(128, 128, 40, 0.5);
}
.link.active.disconnected {
  background-color: rgba(128, 40, 40, 0.5);
}
.link .flow_arrow {
  text-align: center;
}
.paused .link.active {
  background-color: rgba(0, 0, 128, 0.5);
}
.stat_table .stat_row {
  font-size: 8pt;
}
.stat_table .stat_row .stat_noun {
  font-weight: bold;
  color: white;
}
.stat_table .stat_row .total .value {
  color: #3f3;
  font-weight: bold;
}
.stat_table .stat_row .total .buff {
  color: cyan;
  font-style: italic;
}
.stat_table .stat_row .description {
  width: 300px;
}
.stat_table .stat_row .description .factor {
  color: yellow;
  font-weight: bold;
}
img.flip {
  transform: scale(-1, 1);
  -moz-transform: scale(-1, 1);
  -webkit-transform: scale(-1, 1);
  -o-transform: scale(-1, 1);
  -khtml-transform: scale(-1, 1);
  -ms-transform: scale(-1, 1);
}
img.fill_img {
  position: absolute;
  left: 0px;
  top: 0px;
  width: 100%;
  height: 100%;
}
.clickthrough {
  pointer-events: none;
}
.clear {
  clear: inherit;
}
.refinement_bar {
  width: 100%;
  height: 20px;
}
.infusion_bar {
  width: 100%;
  height: 20px;
}
.infusion_bar .ui-progressbar-value {
  background: #00ffff url(https://jamuspsi.github.io/fractory/less/images/ui-bg_hexagon_16_af511a_12x10.png) 50% 50% repeat;
}
.progressbar_with_overlay {
  position: relative;
}
.progressbar_with_overlay .progressbar {
  position: absolute;
  width: 100%;
  height: 100%;
}
.progressbar_with_overlay .overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
.trash_label {
  margin-top: 10px;
}
.status_bar {
  width: 800px;
  margin-top: 20px;
  margin-left: 75px;
}
.status_bar .mana {
  color: aquamarine;
}
.status_bar .spent {
  color: pink;
}
.status_bar .generated {
  color: green;
}
.panes {
  width: 800px;
  margin-left: 75px;
  margin-bottom: 300px;
}
.panes .pane_chooser {
  text-align: center;
}
.panes .pane {
  margin-top: 5px;
  text-align: center;
  width: 100%;
}
.panes .pane.game_stats {
  width: 110%;
}
.panes .pane.game_stats table.game_stats {
  float: left;
}
.panes .pane.game_stats .info_part {
  padding: 10px;
  border: 1px solid yellow;
  float: left;
  margin-left: 100px;
}
.panes .pane.research table {
  width: 90%;
  margin-left: auto;
  margin-right: auto;
  border-collapse: collapse;
}
.panes .pane.research table td {
  padding: 3px 15px;
}
.panes .pane.research .available_research .name {
  font-weight: bold;
}
.panes .pane.research .available_research .mana_cost {
  text-align: right;
}
.panes .pane.research .available_research.cannot_buy {
  background-color: rgba(255, 0, 0, 0.2);
}
.panes .pane.research .available_research.learned {
  background-color: green;
}
.panes .pane.research .available_research.can_buy {
  background-color: rgba(255, 255, 0, 0.2);
}
.panes .pane.shop {
  text-align: left;
}
.panes .pane.shop .shop_settings {
  float: left;
  width: 720px;
  margin-left: 5px;
}
.panes .pane.shop .shop_settings tr td {
  padding-bottom: 9px;
}
.panes .pane.shop .shop_settings th {
  padding-right: 10px;
}
.panes .pane.shop .shop_settings .shop_choose_button {
  display: inline-block;
  margin-right: 10px;
  padding: 5px;
  border: 1px solid silver;
  cursor: pointer;
  -webkit-touch-callout: none;
  /* iOS Safari */

  -webkit-user-select: none;
  /* Chrome/Safari/Opera */

  -khtml-user-select: none;
  /* Konqueror */

  -moz-user-select: none;
  /* Firefox */

  -ms-user-select: none;
  /* Internet Explorer/Edge */

  user-select: none;
  /* Non-prefixed version, currently
                                  not supported by any browser */

}
.panes .pane.shop .shop_settings .shop_choose_button.active {
  background-color: white;
  color: black;
}
.panes .pane.shop .shop_settings .action_button {
  display: inline-block;
  margin-right: 10px;
  padding: 5px;
  border: 1px solid silver;
  cursor: pointer;
  -webkit-touch-callout: none;
  /* iOS Safari */

  -webkit-user-select: none;
  /* Chrome/Safari/Opera */

  -khtml-user-select: none;
  /* Konqueror */

  -moz-user-select: none;
  /* Firefox */

  -ms-user-select: none;
  /* Internet Explorer/Edge */

  user-select: none;
  /* Non-prefixed version, currently
                                  not supported by any browser */

}
.panes .pane.shop .shop_settings .action_button.reroll {
  color: red;
}
.noselect {
  -webkit-touch-callout: none;
  /* iOS Safari */

  -webkit-user-select: none;
  /* Chrome/Safari/Opera */

  -khtml-user-select: none;
  /* Konqueror */

  -moz-user-select: none;
  /* Firefox */

  -ms-user-select: none;
  /* Internet Explorer/Edge */

  user-select: none;
  /* Non-prefixed version, currently
                                  not supported by any browser */

}
.button {
  display: inline-block;
  margin-right: 10px;
  padding: 5px;
  border: 1px solid silver;
  cursor: pointer;
  -webkit-touch-callout: none;
  /* iOS Safari */

  -webkit-user-select: none;
  /* Chrome/Safari/Opera */

  -khtml-user-select: none;
  /* Konqueror */

  -moz-user-select: none;
  /* Firefox */

  -ms-user-select: none;
  /* Internet Explorer/Edge */

  user-select: none;
  /* Non-prefixed version, currently
                                  not supported by any browser */

}
.pane_chooser {
  margin-top: 10px;
}
.pane_button {
  display: inline-block;
  margin-right: 10px;
  padding: 5px;
  border: 1px solid silver;
  -webkit-touch-callout: none;
  /* iOS Safari */

  -webkit-user-select: none;
  /* Chrome/Safari/Opera */

  -khtml-user-select: none;
  /* Konqueror */

  -moz-user-select: none;
  /* Firefox */

  -ms-user-select: none;
  /* Internet Explorer/Edge */

  user-select: none;
  /* Non-prefixed version, currently
                                  not supported by any browser */

  cursor: pointer;
}
.pane_button.active {
  background-color: white;
  color: black;
}
table.horiz_stats {
  border: 2px solid white;
  margin: 0 auto 0 auto;
}
table.horiz_stats th {
  text-align: center;
  text-decoration: underline;
}
table.horiz_stats td {
  text-align: center;
}
table.horiz_stats th,
table.horiz_stats td {
  padding: 0 15px 0 15px;
}
table.shop_table {
  border-collapse: collapse;
  margin: 10px auto 0 auto;
}
table.shop_table tbody tr {
  padding-top: 3px;
  padding-bottom: 3px;
  border-top: 1px solid silver;
  border-bottom: 1px solid silver;
}
table.shop_table tbody tr span.line {
  display: block;
}
table.shop_table tbody tr:hover {
  background-color: #010101;
}
table.shop_table th,
table.shop_table td {
  padding: 5px 15px 5px 15px;
}
tr.available_upgrade {
  cursor: pointer;
}
div#game_render {
  width: 1150px;
  padding-left: 18px;
  margin-left: auto;
  margin-right: auto;
}
.icon-mana {
  background-image: url('https://jamuspsi.github.io/fractory/less/../images/icons/mana.png');
  background-size: 100% 100%;
  width: 16px;
  height: 16px;
  display: inline-block;
}
.full_reset {
  margin-top: 900px;
}
.full_reset button {
  font-size: 6pt;
  color: red;
  font-weight: bold;
}
</style>
	<link rel="stylesheet/less" type="text/css" href="./fractory_files/glyphs.less"><style type="text/css" id="less:fractory-less-glyphs">.glyph_holder {
  position: absolute;
  left: 0px;
  top: 0px;
  height: 100%;
  width: 100%;
}
.glyph_holder .glyph {
  position: absolute;
  color: black;
  vertical-align: middle;
  text-align: center;
  font-size: 15pt;
}
.glyph_holder.one_glyph .glyph1 {
  left: 11px;
  top: 12px;
  width: 36px;
  height: 36px;
  line-height: 60px;
  background-size: 100% 100%;
}
.glyph_holder.two_glyphs .glyph1 {
  top: 20px;
  left: 10px;
  width: 20px;
  height: 20px;
  background-size: 100% 100%;
}
.glyph_holder.two_glyphs .glyph2 {
  top: 21px;
  left: 34px;
  width: 17px;
  height: 17px;
  background-size: 100% 100%;
}
.glyph_holder.three_glyphs .glyph1 {
  top: 14px;
  left: 12px;
  width: 20px;
  height: 20px;
  background-size: 100% 100%;
}
.glyph_holder.three_glyphs .glyph2 {
  top: 17px;
  left: 32px;
  width: 18px;
  height: 18px;
  background-size: 100% 100%;
}
.glyph_holder.three_glyphs .glyph3 {
  top: 36px;
  width: 15px;
  height: 15px;
  left: 22px;
  background-size: 100% 100%;
}
@font-face {
  font-family: magi;
  src: url(https://jamuspsi.github.io/fractory/less/../fonts/alpmagi.ttf);
}
.magi {
  /*font-family: magi;*/

}
.icon-brilliance {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/barbed-sun.png');
}
.icon-radiance {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/beveled-star.png');
}
.magi_c {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/barbed-sun.png');
}
.icon-glow {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/divided-spiral.png');
}
.icon-mystery {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/abstract-002.png');
}
.icon-waxing {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/abstract-062.png');
}
.icon-conductivity {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/nodular.png');
}
.icon-infusing {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/concentric-crescents.png');
}
.icon-imbuing {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/doubled.png');
}
.icon-arcana {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/cursed-star.png');
}
.icon-vividity {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/maze-saw.png');
}
.icon-power {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/zigzag-cage.png');
}
.icon-shine {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/shiny-entrance.png');
}
.icon-lens {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/microscope-lens.png');
}
.icon-prism {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/crystal-eye.png');
}
.icon-shimmer {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/floating-crystal.png');
}
.icon-seal {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/abstract-118.png');
}
.icon-resonance {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/abstract-014.png');
}
.icon-flux {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/coiling-curl.png');
}
.icon-purity {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/holosphere.png');
}
.icon-reflection {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/over-infinity.png');
}
.icon-gleam {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/moebius-triangle.png');
}
.icon-core {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/nested-hexagons.png');
}
.icon-relay {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/abstract-065.png');
}
.icon-conduit {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/abstract-051.png');
}
.icon-capacitor {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/abstract-064.png');
}
.icon-hopper {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/abstract-027.png');
}
.magi_y {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/barbed-sun.png');
}
.magi_z {
  /*font-family: magi;*/

  background: url('https://jamuspsi.github.io/fractory/less/../images/icons/barbed-sun.png');
}
/*
.magi_b {
    .magi; &:after {content: "b"}
}
.magi_c {
    .magi; &:after {content: "c"}
}
.magi_d {
    .magi; &:after {content: "d"}
}
.magi_e {
    .magi; &:after {content: "e"}
}
.magi_f {
    .magi; &:after {content: "f"}
}
.magi_g {
    .magi; &:after {content: "g"}
}
.magi_h { .magi; &:after { content: "h"; } }
.magi_i { .magi; &:after { content: "i"; } }
.magi_j { .magi; &:after { content: "j"; } }
.magi_k { .magi; &:after { content: "k"; } }
.magi_l { .magi; &:after { content: "l"; } }
.magi_m { .magi; &:after { content: "m"; } }
.magi_n { .magi; &:after { content: "n"; } }
.magi_o { .magi; &:after { content: "o"; } }
.magi_p { .magi; &:after { content: "p"; } }
.magi_q { .magi; &:after { content: "q"; } }
.magi_r { .magi; &:after { content: "r"; } }
.magi_s { .magi; &:after { content: "s"; } }
.magi_t { .magi; &:after { content: "t"; } }
.magi_u { .magi; &:after { content: "u"; } }
.magi_v { .magi; &:after { content: "v"; } }
.magi_w { .magi; &:after { content: "w"; } }
.magi_x { .magi; &:after { content: "x"; } }
.magi_y { .magi; &:after { content: "y"; } }
.magi_z { .magi; &:after { content: "z"; } }
*/</style>
	<link rel="stylesheet/less" type="text/css" href="./fractory_files/links_anim.less"><style type="text/css" id="less:fractory-less-links_anim">#outer-barG {
  height: 31px;
  width: 109px;
  border: 2px solid #000000;
  overflow: hidden;
  background-color: #ffffff;
  margin: auto;
}
.stripe_holder {
  height: 100%;
  overflow: hidden;
}
.stripe_holder.up {
  transform: rotate(180deg);
}
.stripe_holder.side {
  height: 0;
}
.stripe_holder.disconnected,
.stripe_holder.inactive {
  height: 0;
}
.link_stripe {
  overflow: hidden;
  background-color: white;
  float: right;
  width: 12px;
  height: 102px;
  margin-right: 15px;
  margin-top: -50px;
  transform: rotate(45deg);
  -o-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
.inner_stripe_holder {
  transform: translate(-100%, 0);
  width: 100%;
  height: 100%;
  animation-name: bar-animationG;
  -o-animation-name: bar-animationG;
  -ms-animation-name: bar-animationG;
  -webkit-animation-name: bar-animationG;
  -moz-animation-name: bar-animationG;
  animation-duration: 1.75s;
  -o-animation-duration: 1.75s;
  -ms-animation-duration: 1.75s;
  -webkit-animation-duration: 1.75s;
  -moz-animation-duration: 1.75s;
  animation-iteration-count: infinite;
  -o-animation-iteration-count: infinite;
  -ms-animation-iteration-count: infinite;
  -webkit-animation-iteration-count: infinite;
  -moz-animation-iteration-count: infinite;
  animation-direction: normal;
  -o-animation-direction: normal;
  -ms-animation-direction: normal;
  -webkit-animation-direction: normal;
  -moz-animation-direction: normal;
  animation-timing-function: linear;
}
@keyframes bar-animationG {
  0% {
    transform: translate(-100%, 0);
  }
  100% {
    transform: translate(100%, 0);
  }
}
</style>
	<script type="text/javascript">less = { env: 'development' };</script>
	<script type="text/javascript" src="./fractory_files/less-1.3.3.min.js"></script>

	<script type="text/javascript" src="./fractory_files/knockout-3.4.0.ice_fork.js"></script>
	<script type="text/javascript" src="./fractory_files/raphael.min.js"></script>
	<script type="text/javascript" src="./fractory_files/interact.min.js"></script>

	<script type="text/javascript" src="./fractory_files/jquery.qtip.min.js"></script>

	<script src="./fractory_files/ice.js"></script>
	<script src="./fractory_files/ko_extenders.js"></script>
	<script src="./fractory_files/templates.js"></script>
	<script src="./fractory_files/point.js"></script>
	<script src="./fractory_files/trig.js"></script>

	<script src="./fractory_files/tooltips.js"></script>
	<script src="./fractory_files/controller.js"></script>
	<script src="./fractory_files/utils.js"></script>
	<script src="./fractory_files/rand.js"></script>

	<script src="./fractory_files/roman.js"></script>
	<script src="./fractory_files/analytics.js(1)"></script>

	<script src="./fractory_files/manacolors.js"></script>
	<script src="./fractory_files/ko_bindings.js"></script>
	<script src="./fractory_files/inventoryslot.js"></script>
	<script src="./fractory_files/shop_slot.js"></script>
	<script src="./fractory_files/trash_slot.js"></script>
	<script src="./fractory_files/node.js"></script>
	<script src="./fractory_files/shell.js"></script>
	<script src="./fractory_files/link.js"></script>
	<script src="./fractory_files/part.js"></script>
	<script src="./fractory_files/junction.js"></script>
	<script src="./fractory_files/junctionanim.js"></script>
	<script src="./fractory_files/mechs.js"></script>
	<script src="./fractory_files/research.js"></script>
	<script src="./fractory_files/talent.js"></script>
	<script src="./fractory_files/upgrade.js"></script>
	<script src="./fractory_files/boost.js"></script>
	<script src="./fractory_files/main.js"></script>
	<script src="./fractory_files/mousetrap.min.js"></script>
	<script src="./fractory_files/keybinds.js"></script>

	<script type="text/html" kot="kot/game.html" id="kot/game.html" src="./fractory_files/game.html" loaded="true">&nbsp;
<button data-bind="
	visible: game.shell() && !!game.view_shell().in_part() && !game.view_shell().zoom_out(),
	click: _.bind(game.zoom_out, game)
">Zoom Out</button>


<div class="part_sandbox">

	<div class="inventory_holder">
		<div class="inventory_label">Held</div>
	<!-- ko foreach: {
		data: game.inventory_slots(),
		as: 'islot'
	} -->
		<!-- ko template: {
			name: 'kot/inventory_slot.html',
			data: islot,
			as: 'islot',
		} --><!-- /ko -->

	<!-- /ko -->
		<div class="clear trash_label">Trash</div>
	<!-- ko template: {
		name: 'kot/trash_slot.html',
		data: game,
		as: 'game'
	} --><!-- /ko -->
	</div>

	<div class="shell_holder" data-bind="css: game.paused() ? 'paused' : ''">
	<!-- ko if: game.shell() -->

		<!-- ko foreach: {data: game.shell_renders(), as: 'shell' } -->
		<div class="shell" data-bind="
			style: {
				width: shell.elsize.x,
				height: shell.elsize.y,
			},
			shell_render: shell,
			right_click: _.bind(shell.right_click, shell),

		">

			<div class="nodes">
				<!-- ko foreach: {data: _.values(shell.nodes), as: 'node'} -->
					<div class="node" data-bind="
						css: 'node_' + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log('ondropenter', ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log('ondropleave', ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log('ondrop', ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: 'center'
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						">
						</div>
						<!-- ko if: node.part() -->
							<!-- ko with: {part: node.part(), shell: node.shell } -->
								<!-- ko template: {
									name: 'kot/part.html',
									data: part,
									as: 'part',
									shell: node.shell,
								} --> <!-- /ko -->
							<!-- /ko -->
						<!-- /ko -->
					</div>
				<!-- /ko -->
			</div>
			<div class="links">
			<!-- ko foreach: {
				data: _.values(shell.nodes), as: 'node'
			} -->
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += ' dir_' + link.direction();
						if(link.active()) classes += ' active';
						return classes;
					})(),
					click: _.bind(link.click, link),
                                        event:{
                                            mouseover: function(link,event) {
                                                if(event.shiftKey) {
                                                    link.set_active(true);
                                                }
                                                else if(event.ctrlKey){
                                                    link.set_active(false);
                                                }
                                            },
                                            mouseenter: function(link,event) {
                                                if(event.shiftKey) {
                                                    link.set_active(true);
                                                }
                                                else if(event.ctrlKey){
                                                    link.set_active(false);
                                                }
                                            },
                                        }
				">

					<div class="stripe_holder" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false -->
					<div class="flow_arrow" data-bind="
						text: !link.active() ? '' :
							  link.flow_direction() === link.direction() ? '--->' :
						      link.flow_direction() === null ? '|' :
						      '<---'
					"></div>
					<!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + '->' + (link.pair_link() ? link.pair_link().node().loc : '') + (link.active() ? link.flow() : '')"></span>
				</div>

			<!-- /ko -->
			<!-- /ko -->
			</div>

		</div>
		<!-- /ko -->
		<!-- /ko -->
	</div>
	<!-- ko template: {
		name: 'kot/shop_bar.html',
		data: game,
		as: 'game'
	} --><!-- /ko -->
	<div class="clear"></div>
	<div class="status_bar">
		<!-- ko template: { name: 'kot/status_bar.html', data: game, as: 'game' } --><!-- /ko -->
	</div>
	<div class="panes">
		<div class="pane_chooser">
			<!-- ko foreach: {
				data: [
					{'pane' : 'stats', label: 'Reflect'},
					{pane: 'upgrades', label: 'Enchant'},
					{pane: 'talents', label: 'Ascend'},

				],
				as: 'pb'
			} -->
				<a class="pane_button" data-bind="
					css: game.current_pane() === pb.pane ? 'active' : '',
					click: function() { game.current_pane(pb.pane); }
				">
					<span data-bind="text: pb.label"></span>
					<!-- ko if: pb.pane === 'talents' && game.level_after_ascend() - game.level() > 0 -->
					(<span data-bind="text: game.level_after_ascend() - game.level()"></span>)
					<!-- /ko -->

				</a>
			<!-- /ko -->
			<a class="pane_button" data-bind="
				click: function() { game.save_game(); }
			">
				<span data-bind="text: 'Saved ' + game.save_ticks() + ' secs ago'"></span>
			</a>

			<a class="pane_button" data-bind="
				click: function() { game.paused() ? game.unpause() : game.pause(); }
			">
				<span data-bind="text: game.paused() ? 'Paused' : 'Pause'"></span>
			</a>
                        
                        <a class="pane_button" data-bind="
				click: function() { alert(game.controls_help_message()); }
			">
				<span data-bind="text: 'Controls'"></span>
			</a>
                        

		</div>
		<!-- ko template: { name: 'kot/panes/stats_pane.html', data: game, as: 'game' } --><!-- /ko -->
		<!-- ko template: { name: 'kot/panes/shop_pane.html', data: game, as: 'game' } --><!-- /ko -->
		<!-- ko template: { name: 'kot/panes/research_pane.html', data: game, as: 'game' } --><!-- /ko -->
		<!-- ko template: { name: 'kot/panes/upgrades_pane.html', data: game, as: 'game' } --><!-- /ko -->
		<!-- ko template: { name: 'kot/panes/talents_pane.html', data: game, as: 'game' } --><!-- /ko -->


	</div>
</div>
</script>
	<script type="text/html" kot="kot/part.html" id="kot/part.html" src="./fractory_files/part.html" loaded="true"><div class="part" data-bind="
	draggable: {
		dragObject: part,
		restrict: {
			restriction: '.part_sandbox'
		},
		onstart: function(ev) {
			/* Actually I already know where it needs to go.. */
			ev.target.setAttribute('data-x', 0);
			ev.target.setAttribute('data-y', 0);
			ev.target.style.transition = '';
			game.dragging_part(part);

		},
		onend: function(ev) {
				ev.target.style.transition = 'transform 0.25s';
				ev.target.style.transform = '';
				game.dragging_part(null);
		},
		onmove: function(event) {
			var target = event.target,
		        // keep the dragged position in the data-x/data-y attributes
		        x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
		        y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

		    // translate the element
		    target.style.webkitTransform =
		    target.style.transform =
		      'translate(' + x + 'px, ' + y + 'px)';

		    // update the posiion attributes
		    target.setAttribute('data-x', x);
		    target.setAttribute('data-y', y);
		},
		snap: {

		}
	},
        right_click: _.bind(part.double_tap, part),
	double_tap: _.bind(part.double_tap, part),
	tap: _.bind(part.tap, part),
        event: {
            mouseover: function(part, event) {
                    game.hovered_part(part);
            },
            mouseout: function(part, event) {
                    if(game.hovered_part() !== part) return;
                    game.hovered_part(null);
            },
        },
	qtip_template: {
		name: 'kot/part_tooltip.html',
		data: part,
		as: 'part',
		qtip: {
			'show': {
				'effect': false,
			},
			'title': 'title1',
			'content': {
				'title': part.name(),
				'text': 'foo',
			},
			'style': {
				'classes': 'qtip-dark'
			},
			'hide': {
				'fixed': false,
				'effect': false,
			},
			'position': {
				'my': 'top right',
				'at': 'top left',
                                viewport: $(window),
                                target: 'mouse',
                                adjust: {
                                    screen: true,
                                    method: 'flip',
                                },
			}
		}
	}
">
	<div class="part_raph" data-bind="
		raphael: _.bind(part.raph, part)
	">
		<div class="glyph_holder" data-bind="css: part.glyph_holder_css()">
			<span class="glyph glyph1 magi" data-bind="css: part.glyph_classes()[0]"></span>
			<span class="glyph glyph2 magi" data-bind="css: part.glyph_classes()[1]"></span>
			<span class="glyph glyph3 magi" data-bind="css: part.glyph_classes()[2]"></span>

		</div>
	</div>
</div></script>
	<script type="text/html" kot="kot/inventory_slot.html" id="kot/inventory_slot.html" src="./fractory_files/inventory_slot.html" loaded="true"><div class="inventory_slot" data-bind="
            dropzone: {
                ondropenter: function(ev) {
                    console.log('ondropenter', ev);
                    ev.draggable.dropped_on = islot;
                },
                ondropleave: function(ev) {
                    console.log('ondropleave', ev);
                    ev.draggable.dropped_on = null;
                },

                ondrop: function(ev) {
                    console.log('ondrop', ev);
                    if(game.animating_shell()) return;

                    islot.set_part(ev.draggable.dragObject);
                },
                overlap: 'center'
            },
            event: {
            mouseover: function(slot, event) {
                    game.hovered_inventory_slot(slot);
            },
            mouseout: function(slot, event) {
                    if(game.hovered_inventory_slot() !== slot) return;
                    game.hovered_inventory_slot(null);
            },
        },
        ">
            <!-- ko if: islot.part() -->
                        <!-- ko with: {part: islot.part(), shell: islot.shell } -->
                            <!-- ko template: {
                                name: 'kot/part.html',
                                data: part,
                                as: 'part',
                                shell: islot.shell,
                            } -->
                            <!-- /ko -->
                        <!-- /ko -->
                    <!-- /ko -->
        </div></script>
	<script type="text/html" kot="kot/trash_slot.html" id="kot/trash_slot.html" src="./fractory_files/trash_slot.html" loaded="true"><div class="trash_slot" data-bind="
            dropzone: {
                ondropenter: function(ev) {
                    console.log('ondropenter', ev);
                    ev.draggable.dropped_on = game.trash_slot();
                },
                ondropleave: function(ev) {
                    console.log('ondropleave', ev);
                    ev.draggable.dropped_on = null;
                },

                ondrop: function(ev) {
                    console.log('ondrop', ev);
                    if(game.animating_shell()) return;

                    game.trash_slot().set_part(ev.draggable.dragObject);
                },
                overlap: 'center'
            }
        ">
    </div></script>
	<script type="text/html" kot="kot/part_tooltip.html" id="kot/part_tooltip.html" src="./fractory_files/part_tooltip.html" loaded="true"><div>
<table class="stat_table">
	<tbody>
	<!-- ko if: Ice.isa(part, CorePart) -->
	<tr class="stat_row">
		<td class="stat_noun">Core</td>
		<td class="total">

		</td>
		<td class="description">The core of your Fractory.  Cannot be moved.  All crystals must be linked to it to function.</td>
	</tr>
	<!-- /ko -->
	<!-- ko if: Ice.isa(part, FractalPart) -->
	<tr class="stat_row">
		<td class="stat_noun">Fractal</td>
		<td class="total">

		</td>
		<td class="description">A fractally nested spatial anomaly.  Can hold more crystals inside.  Links from the outside correspond to links inside; cannot be directly linked to.  The maximum depth on which it can be placed depends on tier.</td>
	</tr>
	<!-- /ko -->
	<!-- ko if: Ice.isa(part, ConduitPart) -->
	<tr class="stat_row">
		<td class="stat_noun">Conduit</td>
		<td class="total">

		</td>
		<td class="description">Each tick, after all other actions, moves an immediately upstream crystal to the next empty downstream node.  Blocks other crystals from moving crystals past it.</td>
	</tr>
	<!-- /ko -->
	<!-- ko if: Ice.isa(part, CapacitorPart) -->
	<tr class="stat_row">
		<td class="stat_noun">Capacitor</td>
		<td class="total">

		</td>
		<td class="description">Each tick, after all other actions, moves an immediately upstream crystal to the next empty downstream node, IF it was not improved this tick.  Blocks other crystals from moving crystals past it.</td>
	</tr>
	<!-- /ko -->
	<!-- ko if: Ice.isa(part, HopperPart) -->
	<tr class="stat_row">
		<td class="stat_noun">Hopper</td>
		<td class="total">

		</td>
		<td class="description">Each tick, after all other actions, moves an immediately upstream crystal to the next empty inventory slot, IF it was not improved this tick.  Then, moves the first crystal in your inventory to the next empty downstream node.  Blocks other crystals from moving crystals past it, and never moves other blocks.</td>
	</tr>
	<!-- /ko -->
	<!-- ko if: Ice.isa(part, RelayPart) -->
	<tr class="stat_row">
		<td class="stat_noun">Relay</td>
		<td class="total">

		</td>
		<td class="description">Passes effects from upstream directly downstream.  Passes through empty crystals and other relays, but cannot fork.</td>
	</tr>
	<!-- /ko -->
	<tr class="stat_row">
		<td class="stat_noun">Tier</td>
		<td class="total">
			<span class="value" data-bind="text: part.tier()"></span>
		</td>
		<td class="description">
			Determines maximum refinement.
		</td>
	</tr>



	<!-- ko foreach: {
	    data: _.sortBy(part.stats_list(), function(part) {
			return part.total() * -1;
		}),
		as: 'sv'
	} -->
	<tr class="stat_row">
		<td class="stat_noun" data-bind="text: sv.mech().props().noun"></td>
		<td class="total">
			<span class="value" data-bind="text: sv.value().formatBig()"></span>
			<span class="buff" data-bind="visible: sv.buff(), text: '+' + sv.buff().formatBig()"></span>
		</td>
		<td class="description">
			<!-- ko if: sv.code() === 'Flaw' -->
				Does nothing.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Glow' -->
				Generates <span class="factor" data-bind="text: sv.factor().formatBig()"></span> mana  per tick. (<span class="factor" data-bind="text: (sv.factor() * part.stat_factor('Brilliance') * part.stat_factor('Vividity')).formatBig()"></span>)
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Brilliance' -->
				Increases mana generation by <span class="factor" data-bind="text: sv.factor().formatByPercent()"></span>.  Requires Glow on the same crystal to be effective.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Vividity' -->
				Increases mana and arcana generation by <span class="factor" data-bind="text: sv.factor().formatByPercent()"></span>.  Requires Glow and/or Arcana on the same crystal to be effective.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'GenerationFlatModifier' -->
				Increases mana generation by <span class="factor" data-bind="text: sv.factor()"></span> per tick.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Radiance' -->
				Buffs <span class="factor" data-bind="text: sv.factor().formatByPercent() "></span> of all other stats on this crystal to immediately downstream crystals.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Conductivity' -->
				Permanently transfers <span class="factor" data-bind="text: sv.factor()"></span>/tick of the lowest stat on immediately upstream crystals to immediately downstream crystals.  Effect splits if there's multiple valid targets.  Costs mana while connected.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Waxing' -->
				Permanently increases the highest stat on immediately downstream crystals by <span class="factor" data-bind="text: sv.factor()"></span>/tick.  Costs mana while connected.  Mana cost scales with target crystal tier.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Reflection' -->
				Permanently increases a stat on a single immediately downstream crystal by <span class="factor" data-bind="text: sv.factor()"></span>/tick.  The stat chosen is the highest stat on a single immediately upstream crystal, and the downstream part won't exceed the upstream part's value in that stat.  Costs mana while connected.  Mana cost scales with downstream crystal tier.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Arcana' -->
				Converts mana to arcana, which is spent on Enchanting.  Enchanting increases the effective value of all stats on all crystals.  (<span class="factor" data-bind="text: (sv.factor() * part.stat_factor('Mystery') * part.stat_factor('Vividity')).formatBig()"></span>/tick after buffs).
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Mystery' -->
				Increases arcana by <span class="factor" data-bind="text: sv.factor().toFixed(2)"></span>x.  Requires Arcana on the same crystal to be effective.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Imbuing' -->
				Permanently increases maximum refinement on immediately downstream crystals by <span class="factor" data-bind="text: sv.factor()"></span>/tick, up to 2x the normal value.  Costs mana while connected.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Infusing' -->
				Infuses immediately downstream crystals with mana at <span class="factor" data-bind="text: sv.factor()"></span>/tick.  Infusion does not count towards refinement.  At great levels of infusion, a crystal's tier increases, dramatically increasing maximum refinement.  <strong>Can only infuse crystals of equal or lesser tier.</strong>
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Infused' -->
				Does not count toward refinement.  At <span class="factor" data-bind="text: (10 * Math.pow(1000, part.tier())).formatBig()"></span>, tier increases by one permanenty, dramatically increasing maximum refinement.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Luster' -->
				Maximum refinement increased by <span class="factor" data-bind="text: sv.factor()"></span>.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Power' -->
				All other stats on this crystal buffed by <span class="factor" data-bind="text: sv.factor().formatByPercent()"></span>.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Shine' -->
				Buffs all stats on immediately downstream crystals by <span class="factor" data-bind="text: sv.factor().formatByPercent()"></span>, except Shine.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Lens' -->
				Buffs this crystal's stats by <span class="factor" data-bind="text: sv.factor().formatPercentOf()"></span> of each stat of each immediately upstream part, excluding Lens.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Prism' -->
				Grants <span class="factor" data-bind="text: sv.factor().formatPercentOf()"></span> of each stat of a single immediately upstream crystal as a buff to each immediately downstream part, excluding Prism.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Shimmer' -->
				Increases all other stats of this crystal by <span class="factor" data-bind="text: sv.factor().formatByPercent()"></span> for each stat (additively) other than Shimmer on this crystal.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Seal' -->
				Increases all other stats of this crystal by <span class="factor" data-bind="text: sv.factor().formatByPercent()"></span> if there are no immediately downstream crystals.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Resonance' -->
				Permanently increases Flux on immediately downstream crystals by <span class="factor" data-bind="text: sv.factor()"></span>/tick.  When a downstream crystal's Flux exceeds the single immediately upstream crystal's total base stats, the Flux is converted into the upstream crystal's base stats.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Flux' -->
				A placeholder stat that can be turned into real stats by Resonance.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Purity' -->
				Increases the highest stat on this crystal by <span class="factor" data-bind="text: sv.factor().formatByPercent()"></span>, if it is at least 50% of the total base stats on this crystal.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Gleam' -->
				Increases all other stats of this crystal by <span class="factor" data-bind="text: sv.factor().formatByPercent()"></span> for each step away this crystal is from the core.
			<!-- /ko -->



		</td>

	</tr>
	<!-- /ko -->

	<tr class="stat_row">
		<td class="stat_noun" data-bind="text: Ice.isa(part.container(), ShopSlot) ? 'Price' : 'Value'"></td>
		<td class="total">
			<span class="value" data-bind="text: part.mana_cost().formatBig()"></span>
		</td>
	</tr>
	<!-- ko if: !Ice.isa(part, CorePart) && !Ice.isa(part, FractalPart) && !Ice.isa(part, ConduitPart) && part.max_refinement() -->
	<tr class="stat_row">
		<td class="stat_noun">Refinement</td>
		<td colspan="2">
			<div class="progressbar_with_overlay refinement_bar">
				<div class="progressbar" data-bind="
					progressbar: {
						part:part,
						value: part.refinement,
						max: part.max_refinement
					}
				">
				</div>
				<div class="overlay">
					<span data-bind="text: part.refinement().formatBig()"></span> /
					<span data-bind="text: part.max_refinement().formatBig()"></span>
				</div>
			</div>
		</td>
	</tr>

	<!-- /ko -->


	<!-- ko if: part.stats().Infused -->
		<tr class="stat_row">
			<td class="stat_noun">Infusion</td>
			<td colspan="2">
				<div class="progressbar_with_overlay infusion_bar">
					<div class="progressbar" data-bind="
						progressbar: {
							part:part,
							value: ko.computed(function() {
								return !(part.stats().Infused) ? 0 : part.stats().Infused.value2();
							}),
							max: ko.computed(function() { return part.next_tier_at(); })
						}
					">
					</div>
						<div class="overlay">
							<span data-bind="text: part.stats().Infused.value().formatBig()"></span> /
							<span data-bind="text: part.next_tier_at().formatBig()"></span>
						</div>
				</div>
			</td>
		</tr>



	<!-- /ko -->
	</tbody>
</table>
</div>
</script>
	<script type="text/html" kot="kot/panes/stats_pane.html" id="kot/panes/stats_pane.html" src="./fractory_files/stats_pane.html" loaded="true"><div class="pane game_stats" data-bind="visible: game.current_pane() === 'stats'">
    <table class="game_stats">
        <tbody>
            <tr>
                <th>Experience</th>
                <td>
                    <span data-bind="text: game.experience().formatBig()"></span>
                </td>
            </tr>
            <tr>
                <th>Arcana</th>
                <td>
                    <span data-bind="text: game.arcana().formatBig()"></span> (Arcana spent on Enchanting becomes exp)
                </td>
            </tr>
            <tr>
                <th>Level after ascent</th>
                <td>

                    <span data-bind="text: game.level_after_ascend()"></span>
                </td>
            </tr>
            <tr>
                <th>Next Level At</th>
                <td>
                    <span data-bind="text: (game.exp_for_level(game.level_after_ascend() + 1) - game.experience()).formatBig()"></span> Arcana
                    (<span data-bind="text: (game.exp_for_level(game.level_after_ascend() + 1) - game.experience() - game.arcana_spent()).formatBig()"></span> more)
                </td>
            </tr>

            <tr>
                <td>Mana:</td>
                <td data-bind="text: game.mana().formatBig()"></td>
            </tr>
            <tr>
                <td>Generated/tick:</td>
                <td>
                    +<span data-bind="text: game.mana_generated().formatBig()"></span>
                </td>
            </tr>
            <!-- ko foreach: {
                data: _.sortBy(game.spent_mana(), function(sm) {
                    return -1 * sm.val();
                }),
                as: 'sm'
                }
            -->
                <tr>
                    <td>
                        <span data-bind="text: sm.reason"></span>:
                    </td>
                    <td data-bind="text: (-1 * sm.val()).formatBig()"></td>
                </tr>
            <!-- /ko -->
            <tr>
                <td>Net</td>
                <td data-bind="
                    text: (game.net_mana() < 0 ? '' : '+') + game.net_mana().formatBig()
                "></td>
            </tr>
        </tbody>
    </table>
    <!-- ko if: game.focused_part() -->
        <div class="info_part">
            <div data-bind="text: game.focused_part().name()"></div>
            <div class="part_tooltip">
                <!-- ko template: {
                    name: 'kot/part_tooltip.html',
                    data: game.focused_part(),
                    as: 'part'
                } --> <!-- /ko -->

            </div>
        </div>
    <!-- /ko -->
</div>
</script>
	<script type="text/html" kot="kot/panes/shop_pane.html" id="kot/panes/shop_pane.html" src="./fractory_files/shop_pane.html" loaded="true">
<div class="pane shop" data-bind="visible: game.current_pane() === 'shop'">
    &nbsp;
    <div class="shop_slot_holder">
    &nbsp;
    <!-- ko if: game.chosen_shop_slot() -->
        <!-- ko with: {ss: game.chosen_shop_slot()} -->
            <div class="shop_slot">
            <!-- ko if: ss.part() -->
                <!-- ko with: {ss: ss, part: ss.part(), shell: ss.shell } -->
                    <!-- ko template: {
                            name: 'kot/part.html',
                            data: part,
                            as: 'part',
                            shell: ss.shell,
                    } --><!-- /ko -->
                <!-- /ko -->
            <!-- /ko -->
            </div>
        <!-- /ko -->
    <!-- /ko -->
    </div>
    <div class="shop_settings">
        <table>
            <tbody>

                <tr>
                    <th>Type</th>
                    <td>
                    <!-- ko foreach: {
                        data: game.shop_slots(),
                        as: 'ss'
                    } -->
                        <a class="shop_choose_button" data-bind="
                            text: {
                                'blank': 'Blank',
                                'single': 'Simple',
                                'multi': 'Complex',
                                'fractal': 'Fractal',
                                'conduit': 'Conduit',
                            }[ss.mode()],
                            css: game.chosen_shop_slot() === ss ? 'active' : '',
                            click: function() {game.chosen_shop_slot(ss); }
                        ">
                        </a>
                    <!-- /ko -->
                    </td>
                </tr>
                <!-- ko if: game.chosen_shop_slot() --><!-- ko with: {ss: game.chosen_shop_slot()} -->
                <tr>
                    <th>Tier</th>
                    <td>
                        <div class="tier_selector">
                            <button class="tier_down" data-bind="
                                disable: ss.tier() <= 1,
                                click: function() {
                                    ss.tier.inc(-1);
                                    ss.restock();
                                }
                            ">-</button>
                            <span class="tier" data-bind="text: ss.tier()"></span>
                            <button class="tier_up" data-bind="
                                disable: ss.tier() >= ss.max_tier(),
                                click: function() {
                                    ss.tier.inc(1);
                                    ss.restock();
                                }
                            ">+</button>

                        </div>

                    </td>
                </tr>
                <!-- ko if: ss.part() -->
                <tr>
                    <th>Reroll</th>
                    <td>
                        <a class="action_button reroll" data-bind="
                            click: function() {ss.restock();},
                        ">
                            Reroll
                        </a>
                    </td>
                </tr>
                <tr>
                    <th>Preview</th>
                    <td>
                        <div class="part_tooltip">
                        <!-- ko template: {
                            name: 'kot/part_tooltip.html',
                            data: ss.part(),
                            as: 'part'
                        } --> <!-- /ko -->

                        </div>
                    </td>
                </tr>
                <!-- /ko -->
                <!-- /ko --><!-- /ko -->
            </tbody>
        </table>
    </div>
    <div class="clear"></div>
</div>
</script>
	<script type="text/html" kot="kot/panes/research_pane.html" id="kot/panes/research_pane.html" src="./fractory_files/research_pane.html" loaded="true"><div class="pane research" data-bind="visible: game.current_pane() === 'research'">
    <table>
        <thead>
            <th>Name</th>
            <th>Arcana</th>
            <th>Mana</th>
            <th>Description</th>
        </thead>
        <tbody>
    <!-- ko foreach: {
        data: _.values(game.available_research()).concat(_.values(game.learned_research())),
        as: 'r'
    } -->

        <tr class="available_research" data-bind="
            click: function() {
                game.buy_research(r);
            },
            css: r.css(game),
        ">
            <td class="name" data-bind="text: r.name"></td>
            <td class="arcana" data-bind="text: r.arcana_requirement()"></td>
            <td class="mana_cost" data-bind="text: r.mana_cost()"></td>
            <td class="description" data-bind="text: r.description()"></td>


        </tr>
    <!-- /ko -->
        </tbody>
    </table>
</div>
</script>
	<script type="text/html" kot="kot/panes/upgrades_pane.html" id="kot/panes/upgrades_pane.html" src="./fractory_files/upgrades_pane.html" loaded="true"><div class="pane upgrades" data-bind="visible: game.current_pane() === 'upgrades'">
    <p>
        Spend Arcana to increase the effective value of a stat on all crystals.
    </p>
    <table class="shop_table noselect">
        <thead>
            <th>Name</th>
            <th>Level</th>
            <th>Bonus</th>
            <th>Next Cost</th>
            <th>Next Bonus</th>
            <th>Description</th>
        </thead>
        <tbody>
    <!-- ko foreach: {
        data: _.chain(game.upgrades_list()).filter(function(ug) { return ug.available(game); }).value(),
        as: 'ug'
    } -->

        <tr class="upgrade available_upgrade" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()"></td>
            <td class="points">
                <span data-bind="text: ug.points()"></span>
                <!-- ko if: ug.max_points(game) !== Infinity -->
                / <span data-bind="text: ug.max_points(game)"></span>
                <!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()"></td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()"></td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            "></td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun"></span>.
            </td>
        </tr>
    <!-- /ko -->
        </tbody>
    </table>
</div>
</script>
	<script type="text/html" kot="kot/panes/talents_pane.html" id="kot/panes/talents_pane.html" src="./fractory_files/talents_pane.html" loaded="true"><div class="pane talents" data-bind="visible: game.current_pane() === 'talents'">

    <div class="ascend_block">
        <p>
            <button data-bind="
                click: function() {
                    var conf = window.confirm('Ascending will destroy all crystals and upgrades, granting experience equal to your spent arcana.  Are you sure?  (Protip: your first ascent should be to level 3.)');
                    if(conf) game.ascend();
                }
            ">Ascend</button> now for
            <span data-bind="text: game.arcana_spent().formatBig()"></span> experience, increasing level by
            <span data-bind="text: game.level_after_ascend() - game.level()"></span>.
        </p>
        <p>
            You gain experience by enchanting, one point per arcana spent.
        </p>
        <p>
            <strong style="color: red;">You will LOSE ALL CRYSTALS AND UPGRADES when you ascend.</strong>
        </p>
    </div>

    <table class="stats_table horiz_stats">
        <thead>
            <tr>
                <th>Level</th>
                <th>Available Talent Points</th>
                <th>Next Level At</th>
                <th>Next Discovery</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td data-bind="text: game.level()"></td>
                <td>
                    <span data-bind="text: game.unspent_tp()"></span>
                    / <span data-bind="text: game.total_tp()"></span>
                <td>
                    <span data-bind="text: (game.exp_for_level(game.level_after_ascend() + 1) - game.experience()).formatBig()"></span> Arcana
                    (<span data-bind="text: (game.exp_for_level(game.level_after_ascend() + 1) - game.experience() - game.arcana_spent()).formatBig()"></span> more)
                </td>

                <td>
                    <!-- ko if: !game.next_talent_discovered() -->
                        None
                    <!-- /ko -->
                    <!-- ko if: game.next_talent_discovered() -->
                        <span data-bind="text: game.next_talent_discovered().name()"></span>
                        at Level <span data-bind="text: game.next_talent_discovered().min_level()"></span>
                    <!-- /ko -->

                </td>

            </tr>
        </tbody>

    </table>
    <div class="reset_block">
        <p>
            <button data-bind="
                click: function() {
                    var conf = window.confirm('You can reset your spent talent points, but it will force an ascension at the same time.  Are you sure?');
                    if(!conf) return;
                    _.each(game.talents_list(), function(tal) { tal.points(0); });
                    game.ascend();
                }
            ">Reset Points</button> (requires immediate ascent)
        </p>
    </div>

    <table class="shop_table">
        <thead>
            <th>Name</th>
            <th>Level</th>
            <th>Bonus</th>
            <th>Description</th>
        </thead>
        <tbody>
    <!-- ko foreach: {
        data: _.chain(game.talents_list()).filter(function(tal) { return tal.available(game); }).value(),
        as: 'tal'
    } -->

        <tr class="available_talent" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()"></td>
            <td class="points">
                <span data-bind="text: tal.points()"></span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)"></span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()"></span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) -->
                <span class="line">Unlocks the <span data-bind="text: Mechs[tal.unlocks_stat()].props().noun"></span> stat.</span>

                <!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() && false">Unlocks/</span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun"></span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() -->
                <span class="line">Adds 3 inventory slots.</span>
                <!-- /ko -->
                <!-- ko if: tal.shop_mode() -->
                    <span class="line">
                        <span data-bind="
                            text: {
                                'single': 'Increases the maximum tier of Simple crystal you can conjure.',
                                'multi': 'Increases the maximum tier of Complex crystal you can conjure.',
                                'fractal': 'Increases the maximum tier of Fractal crystal you can conjure.  Higher tiers can be nested deeper.',
                                'conduit': 'Unlocks conduits, which automatically move parts downstream.',
                                'capacitor': 'Unlocks capacitors, which automatically move parts downstream when they\'re done improving.',
                                'relay': 'Unlocks relays, which redirect effects further downstream.',
                                'hopper': 'Unlocks hoppers, which move crystals in and out of your inventory.'
                            }[tal.shop_mode()]"></span>

                    </span>
                <!-- /ko -->
            </td>
        </tr>
    <!-- /ko -->
        </tbody>
    </table>
    <div class="full_reset">
        <button data-bind="click: _.bind(game.full_reset, game)">Full Reset</button> to lose all crystals, upgrades, AND EXPERIENCE, LEVELS, AND TALENTS.  This is a complete reset!  There is no going back!
    </div>
</div>
</script>
	<script type="text/html" kot="kot/shop_bar.html" id="kot/shop_bar.html" src="./fractory_files/shop_bar.html" loaded="true">    <div class="shop_bar">
        <div class="shop_label">Conjure</div>

        <div class="shop_slot_holder">
            <!-- ko foreach: {
                data: game.shop_slots(),
                as: 'ss'
            } -->
                <div class="shop_entry">
                    <div class="shop_slot_label" data-bind="
                        text: {
                            'blank': 'Blank',
                            'single': 'Simple',
                            'multi': 'Complex',
                            'fractal': 'Fractal',
                            'conduit': 'Conduit',
                            'capacitor': 'Capacitor',
                            'relay': 'Relay',
                            'hopper': 'Hopper',
                        }[ss.mode()]
                    "></div>
                    <div class="shop_slot">
                        <!-- ko if: ss.part() -->
                            <!-- ko with: {ss: ss, part: ss.part(), shell: ss.shell } -->
                                <!-- ko template: {
                                        name: 'kot/part.html',
                                        data: part,
                                        as: 'part',
                                        shell: ss.shell,
                                } --><!-- /ko -->
                            <!-- /ko -->
                        <!-- /ko -->
                    </div>
                    <!-- ko if: ss.part() -->
                    <div class="shop_price">
                        <i class="icon-mana"></i>
                        <span data-bind="text: ss.part().mana_cost().formatBig()"></span>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: ss.mode() === 'single' || ss.mode() === 'multi' -->
                    <div>
                        <button data-bind="click: function() { ss.restock(); }">Reroll</button>
                        <!-- ko if: ss.mode() === 'single' -->
                        <button data-bind="click: function() {ss.next_stat();}, right_click: function() {ss.prev_stat();}, event:{mousewheel: function(handler,event)
                                {
                                    if(event.originalEvent.wheelDelta<0)
                                    {
                                        ss.next_stat();
                                    }
                                    else
                                    {
                                    if(ss.mode() === 'fractal' && ss.tier()>1)
                                        {
                                            ss.tier.inc(-1);
                                            ss.restock();
                                            return;
                                        }
                                        ss.prev_stat();
                                    }
                                }}">&#60; &#62;</button>
                        <!-- /ko -->
                    </div>
                    <!-- /ko -->
                    <div class="tier_selector" data-bind="visible: ss.max_tier() > 1,
                         event:{mousewheel: function(handler,event)
                                {
                                    if(event.originalEvent.wheelDelta<0)
                                    {
                                    if(ss.tier()< ss.max_tier())
                                        {
                                            ss.tier.inc(1);
                                            ss.restock();
                                            return;
                                        }
                                    }
                                    else
                                    {
                                    if(ss.tier()>1)
                                        {
                                            ss.tier.inc(-1);
                                            ss.restock();
                                            return;
                                        }
                                    }
                                }}
                         ">
                        <button class="tier_down" data-bind="
                            disable: ss.tier() <= 1,
                            click: function() {
                                ss.tier.inc(-1);
                                ss.restock();
                            }
                        ">-</button>
                        <span class="tier" data-bind="text: ss.tier()"></span>
                        <button class="tier_up" data-bind="
                            disable: ss.tier() >= ss.max_tier(),
                            click: function() {
                                ss.tier.inc(1);
                                ss.restock();
                            }
                        ">+</button>

                    </div>
                </div>
            <!-- /ko -->
        </div>

    </div>
</script>
	<script type="text/html" kot="kot/status_bar.html" id="kot/status_bar.html" src="./fractory_files/status_bar.html" loaded="true"><table class="game_stats">
    <tbody>
        <tr>
            <th>Mana</th>
            <td>
                <i class="icon-mana"></i>
                <span class="mana" data-bind="text: game.mana().formatBig()"></span>
                (+<span class="generated" data-bind="text: game.mana_generated().formatBig()"></span>
                -<span class="spent" data-bind="text: (function() {
                    var tot = 0;
                    _.each(game.spent_mana(), function(sm) {
                        tot += sm.val();
                    });
                    return tot;
                })().formatBig()

                "></span> =
                <span class="mana" data-bind="text: (game.net_mana() >= 0 ?
                '+' : '') + game.net_mana().formatBig()"></span>/tick)
            </td>
        </tr>
        <tr>
            <th>Arcana</th>
            <td>
                <span class="arcana" data-bind="text: game.arcana().formatBig()"></span>
                (+<span class="generated" data-bind="text: game.arcana_generated().formatBig()"></span>/tick)
            </td>



        </tr>
    </tbody>
</table></script>


</head>
<body>
	<div id="game_render" data-bind="template: { name: &#39;kot/game.html&#39;, data: game, as: &#39;game&#39; },">&nbsp;
<button data-bind="
	visible: game.shell() &amp;&amp; !!game.view_shell().in_part() &amp;&amp; !game.view_shell().zoom_out(),
	click: _.bind(game.zoom_out, game)
" style="display: none;">Zoom Out</button>


<div class="part_sandbox">

	<div class="inventory_holder">
		<div class="inventory_label">Held</div>
	<!-- ko foreach: {
		data: game.inventory_slots(),
		as: 'islot'
	} -->
		<!-- ko template: {
			name: 'kot/inventory_slot.html',
			data: islot,
			as: 'islot',
		} --><div class="inventory_slot" data-bind="
            dropzone: {
                ondropenter: function(ev) {
                    console.log(&#39;ondropenter&#39;, ev);
                    ev.draggable.dropped_on = islot;
                },
                ondropleave: function(ev) {
                    console.log(&#39;ondropleave&#39;, ev);
                    ev.draggable.dropped_on = null;
                },

                ondrop: function(ev) {
                    console.log(&#39;ondrop&#39;, ev);
                    if(game.animating_shell()) return;

                    islot.set_part(ev.draggable.dragObject);
                },
                overlap: &#39;center&#39;
            }
        ">
            <!-- ko if: islot.part() --><!-- /ko -->
        </div><!-- /ko -->

	
		<!-- ko template: {
			name: 'kot/inventory_slot.html',
			data: islot,
			as: 'islot',
		} --><div class="inventory_slot" data-bind="
            dropzone: {
                ondropenter: function(ev) {
                    console.log(&#39;ondropenter&#39;, ev);
                    ev.draggable.dropped_on = islot;
                },
                ondropleave: function(ev) {
                    console.log(&#39;ondropleave&#39;, ev);
                    ev.draggable.dropped_on = null;
                },

                ondrop: function(ev) {
                    console.log(&#39;ondrop&#39;, ev);
                    if(game.animating_shell()) return;

                    islot.set_part(ev.draggable.dragObject);
                },
                overlap: &#39;center&#39;
            }
        ">
            <!-- ko if: islot.part() --><!-- /ko -->
        </div><!-- /ko -->

	
		<!-- ko template: {
			name: 'kot/inventory_slot.html',
			data: islot,
			as: 'islot',
		} --><div class="inventory_slot" data-bind="
            dropzone: {
                ondropenter: function(ev) {
                    console.log(&#39;ondropenter&#39;, ev);
                    ev.draggable.dropped_on = islot;
                },
                ondropleave: function(ev) {
                    console.log(&#39;ondropleave&#39;, ev);
                    ev.draggable.dropped_on = null;
                },

                ondrop: function(ev) {
                    console.log(&#39;ondrop&#39;, ev);
                    if(game.animating_shell()) return;

                    islot.set_part(ev.draggable.dragObject);
                },
                overlap: &#39;center&#39;
            }
        ">
            <!-- ko if: islot.part() --><!-- /ko -->
        </div><!-- /ko -->

	
		<!-- ko template: {
			name: 'kot/inventory_slot.html',
			data: islot,
			as: 'islot',
		} --><div class="inventory_slot" data-bind="
            dropzone: {
                ondropenter: function(ev) {
                    console.log(&#39;ondropenter&#39;, ev);
                    ev.draggable.dropped_on = islot;
                },
                ondropleave: function(ev) {
                    console.log(&#39;ondropleave&#39;, ev);
                    ev.draggable.dropped_on = null;
                },

                ondrop: function(ev) {
                    console.log(&#39;ondrop&#39;, ev);
                    if(game.animating_shell()) return;

                    islot.set_part(ev.draggable.dragObject);
                },
                overlap: &#39;center&#39;
            }
        ">
            <!-- ko if: islot.part() --><!-- /ko -->
        </div><!-- /ko -->

	
		<!-- ko template: {
			name: 'kot/inventory_slot.html',
			data: islot,
			as: 'islot',
		} --><div class="inventory_slot" data-bind="
            dropzone: {
                ondropenter: function(ev) {
                    console.log(&#39;ondropenter&#39;, ev);
                    ev.draggable.dropped_on = islot;
                },
                ondropleave: function(ev) {
                    console.log(&#39;ondropleave&#39;, ev);
                    ev.draggable.dropped_on = null;
                },

                ondrop: function(ev) {
                    console.log(&#39;ondrop&#39;, ev);
                    if(game.animating_shell()) return;

                    islot.set_part(ev.draggable.dragObject);
                },
                overlap: &#39;center&#39;
            }
        ">
            <!-- ko if: islot.part() --><!-- /ko -->
        </div><!-- /ko -->

	
		<!-- ko template: {
			name: 'kot/inventory_slot.html',
			data: islot,
			as: 'islot',
		} --><div class="inventory_slot" data-bind="
            dropzone: {
                ondropenter: function(ev) {
                    console.log(&#39;ondropenter&#39;, ev);
                    ev.draggable.dropped_on = islot;
                },
                ondropleave: function(ev) {
                    console.log(&#39;ondropleave&#39;, ev);
                    ev.draggable.dropped_on = null;
                },

                ondrop: function(ev) {
                    console.log(&#39;ondrop&#39;, ev);
                    if(game.animating_shell()) return;

                    islot.set_part(ev.draggable.dragObject);
                },
                overlap: &#39;center&#39;
            }
        ">
            <!-- ko if: islot.part() --><!-- /ko -->
        </div><!-- /ko -->

	
		<!-- ko template: {
			name: 'kot/inventory_slot.html',
			data: islot,
			as: 'islot',
		} --><div class="inventory_slot" data-bind="
            dropzone: {
                ondropenter: function(ev) {
                    console.log(&#39;ondropenter&#39;, ev);
                    ev.draggable.dropped_on = islot;
                },
                ondropleave: function(ev) {
                    console.log(&#39;ondropleave&#39;, ev);
                    ev.draggable.dropped_on = null;
                },

                ondrop: function(ev) {
                    console.log(&#39;ondrop&#39;, ev);
                    if(game.animating_shell()) return;

                    islot.set_part(ev.draggable.dragObject);
                },
                overlap: &#39;center&#39;
            }
        ">
            <!-- ko if: islot.part() --><!-- /ko -->
        </div><!-- /ko -->

	
		<!-- ko template: {
			name: 'kot/inventory_slot.html',
			data: islot,
			as: 'islot',
		} --><div class="inventory_slot" data-bind="
            dropzone: {
                ondropenter: function(ev) {
                    console.log(&#39;ondropenter&#39;, ev);
                    ev.draggable.dropped_on = islot;
                },
                ondropleave: function(ev) {
                    console.log(&#39;ondropleave&#39;, ev);
                    ev.draggable.dropped_on = null;
                },

                ondrop: function(ev) {
                    console.log(&#39;ondrop&#39;, ev);
                    if(game.animating_shell()) return;

                    islot.set_part(ev.draggable.dragObject);
                },
                overlap: &#39;center&#39;
            }
        ">
            <!-- ko if: islot.part() --><!-- /ko -->
        </div><!-- /ko -->

	<!-- /ko -->
		<div class="clear trash_label">Trash</div>
	<!-- ko template: {
		name: 'kot/trash_slot.html',
		data: game,
		as: 'game'
	} --><div class="trash_slot" data-bind="
            dropzone: {
                ondropenter: function(ev) {
                    console.log(&#39;ondropenter&#39;, ev);
                    ev.draggable.dropped_on = game.trash_slot();
                },
                ondropleave: function(ev) {
                    console.log(&#39;ondropleave&#39;, ev);
                    ev.draggable.dropped_on = null;
                },

                ondrop: function(ev) {
                    console.log(&#39;ondrop&#39;, ev);
                    if(game.animating_shell()) return;

                    game.trash_slot().set_part(ev.draggable.dragObject);
                },
                overlap: &#39;center&#39;
            }
        ">
    </div><!-- /ko -->
	</div>

	<div class="shell_holder" data-bind="css: game.paused() ? &#39;paused&#39; : &#39;&#39;">
	<!-- ko if: game.shell() -->

		<!-- ko foreach: {data: game.shell_renders(), as: 'shell' } -->
		<div class="shell" data-bind="
			style: {
				width: shell.elsize.x,
				height: shell.elsize.y,
			},
			shell_render: shell,
			right_click: _.bind(shell.right_click, shell),

		" style="width: 720px; height: 640px;">

			<div class="nodes">
				<!-- ko foreach: {data: _.values(shell.nodes), as: 'node'} -->
					<div class="node node_ctr" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 330px; top: 290px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">ctr</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">0</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() -->
							<!-- ko with: {part: node.part(), shell: node.shell } -->
								<!-- ko template: {
									name: 'kot/part.html',
									data: part,
									as: 'part',
									shell: node.shell,
								} --><div class="part" data-bind="
	draggable: {
		dragObject: part,
		restrict: {
			restriction: &#39;.part_sandbox&#39;
		},
		onstart: function(ev) {
			/* Actually I already know where it needs to go.. */
			ev.target.setAttribute(&#39;data-x&#39;, 0);
			ev.target.setAttribute(&#39;data-y&#39;, 0);
			ev.target.style.transition = &#39;&#39;;
			game.dragging_part(part);

		},
		onend: function(ev) {
				ev.target.style.transition = &#39;transform 0.25s&#39;;
				ev.target.style.transform = &#39;&#39;;
				game.dragging_part(null);
		},
		onmove: function(event) {
			var target = event.target,
		        // keep the dragged position in the data-x/data-y attributes
		        x = (parseFloat(target.getAttribute(&#39;data-x&#39;)) || 0) + event.dx,
		        y = (parseFloat(target.getAttribute(&#39;data-y&#39;)) || 0) + event.dy;

		    // translate the element
		    target.style.webkitTransform =
		    target.style.transform =
		      &#39;translate(&#39; + x + &#39;px, &#39; + y + &#39;px)&#39;;

		    // update the posiion attributes
		    target.setAttribute(&#39;data-x&#39;, x);
		    target.setAttribute(&#39;data-y&#39;, y);
		},
		snap: {

		}
	},
	double_tap: _.bind(part.double_tap, part),
	tap: _.bind(part.tap, part),
	qtip_template: {
		name: &#39;kot/part_tooltip.html&#39;,
		data: part,
		as: &#39;part&#39;,
		qtip: {
			&#39;show&#39;: {
				&#39;effect&#39;: false,
			},
			&#39;title&#39;: &#39;title1&#39;,
			&#39;content&#39;: {
				&#39;title&#39;: part.name(),
				&#39;text&#39;: &#39;foo&#39;,
			},
			&#39;style&#39;: {
				&#39;classes&#39;: &#39;qtip-dark&#39;
			},
			&#39;hide&#39;: {
				&#39;fixed&#39;: false,
				&#39;effect&#39;: false,
			},
			&#39;position&#39;: {
				&#39;my&#39;: &#39;top left&#39;,
				&#39;at&#39;: &#39;top right&#39;,
			}
		}
	}
" data-hasqtip="8">
	<div class="part_raph" data-bind="
		raphael: _.bind(part.raph, part)
	"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><path fill="none" stroke="#a57164" d="M57,30L43.5,6.6173140978201594L16.500000000000007,6.617314097820156L3,29.999999999999996L16.499999999999986,53.382685902179844L43.5,53.382685902179844Z" stroke-width="3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ff0000" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ff9999" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffff00" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#00ff99" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#0099ff" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ff00ff" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" fill-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M60,30L45,4.019237886466843L15.000000000000007,4.01923788646684L0,29.999999999999996L14.999999999999986,55.98076211353315L45,55.98076211353316Z" stroke-width="3" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path><path fill="none" stroke="#000000" d="M63,30L46.5,1.4211616751135274L13.500000000000007,1.4211616751135239L-3,29.999999999999996L13.499999999999986,58.57883832488647L46.5,58.578838324886476Z" stroke-width="5" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path></svg>
		<div class="glyph_holder one_glyph" data-bind="css: part.glyph_holder_css()" >
			<span class="glyph glyph1 magi icon-core" data-bind="css: part.glyph_classes()[0]"></span>
			<span class="glyph glyph2 magi" data-bind="css: part.glyph_classes()[1]"></span>
			<span class="glyph glyph3 magi" data-bind="css: part.glyph_classes()[2]"></span>

		</div>
	</div>
</div><!-- /ko -->
							<!-- /ko -->
						<!-- /ko -->
					</div>
				
					<div class="node node_e" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 480px; top: 290px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">e</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_ne" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 405px; top: 160.096px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px; top: -0.0875092px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">ne</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_nw" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 255px; top: 160.096px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px; top: -0.0875092px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">nw</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_w" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 180px; top: 290px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.800018px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">w</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_sw" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 255px; top: 419.904px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px; top: -0.899994px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">sw</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_se" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 405px; top: 419.904px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px; top: -0.899994px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">se</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_e2" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 630px; top: 290px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">e2</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_ene" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 555px; top: 160.096px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px; top: -0.0875092px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">ene</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_ne2" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 480px; top: 30.1924px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px; top: -0.1875px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">ne2</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_n" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 330px; top: 30.1924px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px; top: -0.1875px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">n</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_nw2" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 180px; top: 30.1924px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.800018px; top: -0.1875px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">nw2</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_wnw" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 105px; top: 160.096px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.800018px; top: -0.0875092px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">wnw</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_w2" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 30px; top: 290px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.800018px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">w2</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_wsw" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 105px; top: 419.904px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.800018px; top: -0.899994px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">wsw</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_sw2" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 180px; top: 549.808px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.800018px; top: -0.799988px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">sw2</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_s" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 330px; top: 549.808px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px; top: -0.799988px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">s</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_se2" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 480px; top: 549.808px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px; top: -0.799988px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">se2</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				
					<div class="node node_ese" data-bind="
						css: &#39;node_&#39; + node.loc,
						style: {
							width: node.elsize.x,
							height: node.elsize.y,
							left: node.pos.x,
							top: node.pos.y,
						},
						dropzone: {
							ondropenter: function(ev) {
								console.log(&#39;ondropenter&#39;, ev);
								ev.draggable.dropped_on = node;
							},
							ondropleave: function(ev) {
								console.log(&#39;ondropleave&#39;, ev);
								ev.draggable.dropped_on = null;
							},

							ondrop: function(ev) {
								console.log(&#39;ondrop&#39;, ev);
								if(game.animating_shell()) return;

								node.set_part(ev.draggable.dragObject);
							},
							overlap: &#39;center&#39;
						},
						double_tap: _.bind(node.double_tap, node),
						right_click: _.bind(node.right_click, node),
						event: {
							mouseover: function(node, event) {
								game.hovered_node(node);
							},
							mouseout: function(node, event) {
								if(game.hovered_node() !== node) return;
								game.hovered_node(null);
							}
						}
					" style="width: 60px; height: 60px; left: 555px; top: 419.904px;">
						<div class="node_raph" data-bind="
							raphael: _.bind(node.raph, node)
						"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.799988px; top: -0.899994px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="30" y="30" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">ese</tspan></text><text x="30" y="40" text-anchor="middle" font-family="&quot;Arial&quot;" font-size="10px" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: Arial; font-size: 10px;"><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="3.203125">abc</tspan></text><path fill="#272822" stroke="#808080" d="M58,30L44,5.751288694035718L16.000000000000007,5.751288694035715L2,29.999999999999996L15.999999999999988,54.24871130596428L44,54.24871130596428Z" stroke-width="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
						</div>
						<!-- ko if: node.part() --><!-- /ko -->
					</div>
				<!-- /ko -->
			</div>
			<div class="links">
			<!-- ko foreach: {
				data: _.values(shell.nodes), as: 'node'
			} -->
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} --><!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link inactive dir_w" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 380px; top: 308px; transform: rotate(180deg);">

					<div class="stripe_holder inactive" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">e-&gt;ctr</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link inactive dir_sw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 342.5px; top: 243.048px; transform: rotate(120deg);">

					<div class="stripe_holder inactive" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">ne-&gt;ctr</span>
				</div>

			
				<div class="link disconnected dir_se" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 417.5px; top: 243.048px; transform: rotate(60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">ne-&gt;e</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link inactive dir_se" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 267.5px; top: 243.048px; transform: rotate(60deg);">

					<div class="stripe_holder inactive" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">nw-&gt;ctr</span>
				</div>

			
				<div class="link disconnected dir_e" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 305px; top: 178.096px;">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">nw-&gt;ne</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link inactive dir_e" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 230px; top: 308px;">

					<div class="stripe_holder inactive" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">w-&gt;ctr</span>
				</div>

			
				<div class="link disconnected dir_ne" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 192.5px; top: 243.048px; transform: rotate(-60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">w-&gt;nw</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link inactive dir_ne" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 267.5px; top: 372.952px; transform: rotate(-60deg);">

					<div class="stripe_holder inactive" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">sw-&gt;ctr</span>
				</div>

			
				<div class="link disconnected dir_nw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 192.5px; top: 372.952px; transform: rotate(-120deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">sw-&gt;w</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link inactive dir_nw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 342.5px; top: 372.952px; transform: rotate(-120deg);">

					<div class="stripe_holder inactive" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">se-&gt;ctr</span>
				</div>

			
				<div class="link disconnected dir_ne" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 417.5px; top: 372.952px; transform: rotate(-60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">se-&gt;e</span>
				</div>

			
				<div class="link disconnected dir_w" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 305px; top: 437.904px; transform: rotate(180deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">se-&gt;sw</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link disconnected dir_w" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 530px; top: 308px; transform: rotate(180deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">e2-&gt;e</span>
				</div>

			
				<div class="link disconnected dir_e" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 680px; top: 308px;">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">e2-&gt;</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link disconnected dir_sw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 492.5px; top: 243.048px; transform: rotate(120deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">ene-&gt;e</span>
				</div>

			
				<div class="link disconnected dir_w" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 455px; top: 178.096px; transform: rotate(180deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">ene-&gt;ne</span>
				</div>

			
				<div class="link disconnected dir_se" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 567.5px; top: 243.048px; transform: rotate(60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">ene-&gt;e2</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link disconnected dir_sw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 417.5px; top: 113.144px; transform: rotate(120deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">ne2-&gt;ne</span>
				</div>

			
				<div class="link disconnected dir_se" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 492.5px; top: 113.144px; transform: rotate(60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">ne2-&gt;ene</span>
				</div>

			
				<div class="link disconnected dir_ne" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 492.5px; top: -16.7595px; transform: rotate(-60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">ne2-&gt;</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link disconnected dir_se" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 342.5px; top: 113.144px; transform: rotate(60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">n-&gt;ne</span>
				</div>

			
				<div class="link disconnected dir_sw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 267.5px; top: 113.144px; transform: rotate(120deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">n-&gt;nw</span>
				</div>

			
				<div class="link disconnected dir_e" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 380px; top: 48.1924px;">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">n-&gt;ne2</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link disconnected dir_se" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 192.5px; top: 113.144px; transform: rotate(60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">nw2-&gt;nw</span>
				</div>

			
				<div class="link disconnected dir_e" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 230px; top: 48.1924px;">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">nw2-&gt;n</span>
				</div>

			
				<div class="link disconnected dir_nw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 117.5px; top: -16.7595px; transform: rotate(-120deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">nw2-&gt;</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link disconnected dir_e" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 155px; top: 178.096px;">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">wnw-&gt;nw</span>
				</div>

			
				<div class="link disconnected dir_se" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 117.5px; top: 243.048px; transform: rotate(60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">wnw-&gt;w</span>
				</div>

			
				<div class="link disconnected dir_ne" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 117.5px; top: 113.144px; transform: rotate(-60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">wnw-&gt;nw2</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link disconnected dir_e" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 80px; top: 308px;">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">w2-&gt;w</span>
				</div>

			
				<div class="link disconnected dir_ne" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 42.5px; top: 243.048px; transform: rotate(-60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">w2-&gt;wnw</span>
				</div>

			
				<div class="link disconnected dir_w" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: -70px; top: 308px; transform: rotate(180deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">w2-&gt;</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link disconnected dir_ne" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 117.5px; top: 372.952px; transform: rotate(-60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">wsw-&gt;w</span>
				</div>

			
				<div class="link disconnected dir_e" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 155px; top: 437.904px;">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">wsw-&gt;sw</span>
				</div>

			
				<div class="link disconnected dir_nw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 42.5px; top: 372.952px; transform: rotate(-120deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">wsw-&gt;w2</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link disconnected dir_ne" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 192.5px; top: 502.856px; transform: rotate(-60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">sw2-&gt;sw</span>
				</div>

			
				<div class="link disconnected dir_nw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 117.5px; top: 502.856px; transform: rotate(-120deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">sw2-&gt;wsw</span>
				</div>

			
				<div class="link disconnected dir_sw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 117.5px; top: 632.76px; transform: rotate(120deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">sw2-&gt;</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link disconnected dir_nw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 267.5px; top: 502.856px; transform: rotate(-120deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">s-&gt;sw</span>
				</div>

			
				<div class="link disconnected dir_ne" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 342.5px; top: 502.856px; transform: rotate(-60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">s-&gt;se</span>
				</div>

			
				<div class="link disconnected dir_w" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 230px; top: 567.808px; transform: rotate(180deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">s-&gt;sw2</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link disconnected dir_nw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 417.5px; top: 502.856px; transform: rotate(-120deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">se2-&gt;se</span>
				</div>

			
				<div class="link disconnected dir_w" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 380px; top: 567.808px; transform: rotate(180deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">se2-&gt;s</span>
				</div>

			
				<div class="link disconnected dir_se" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 492.5px; top: 632.76px; transform: rotate(60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">se2-&gt;</span>
				</div>

			<!-- /ko -->
			
			<!-- ko foreach: {
				data: _.filter(node.links, function(link) {
					return link.primary();
					return link.flow() === 'down' || (link.flow() !== 'up' && link.primary()) || !link.pair_link();
				}),
				as: 'link'
			} -->
				<div class="link disconnected dir_nw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 492.5px; top: 372.952px; transform: rotate(-120deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">ese-&gt;e</span>
				</div>

			
				<div class="link disconnected dir_w" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 455px; top: 437.904px; transform: rotate(180deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">ese-&gt;se</span>
				</div>

			
				<div class="link disconnected dir_ne" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 567.5px; top: 372.952px; transform: rotate(-60deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">ese-&gt;e2</span>
				</div>

			
				<div class="link disconnected dir_sw" data-bind="
					style: {
						width: link.elsize.x,
						height: link.elsize.y,
						left: link.pos.x,
						top: link.pos.y,
						transform: link.rotate_transform
					},
					css: (function() {
						var classes = link.flow();
						classes += &#39; dir_&#39; + link.direction();
						if(link.active()) classes += &#39; active&#39;;
						return classes;
					})(),
					click: _.bind(link.click, link)
				" style="width: 110px; height: 24px; left: 492.5px; top: 502.856px; transform: rotate(120deg);">

					<div class="stripe_holder disconnected" data-bind="

						css: link.stripe_holder_css()
					">
						<div class="inner_stripe_holder">
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
							<div class="link_stripe"></div>
						</div>
					</div>
					<!-- ko if: false --><!-- /ko -->
					<span data-bind="visible: false, text: link.node().loc + &#39;-&gt;&#39; + (link.pair_link() ? link.pair_link().node().loc : &#39;&#39;) + (link.active() ? link.flow() : &#39;&#39;)" style="display: none;">ese-&gt;se2</span>
				</div>

			<!-- /ko -->
			<!-- /ko -->
			</div>

		</div>
		<!-- /ko -->
		<!-- /ko -->
	</div>
	<!-- ko template: {
		name: 'kot/shop_bar.html',
		data: game,
		as: 'game'
	} -->    <div class="shop_bar">
        <div class="shop_label">Conjure</div>

        <div class="shop_slot_holder">
            <!-- ko foreach: {
                data: game.shop_slots(),
                as: 'ss'
            } -->
                <div class="shop_entry">
                    <div class="shop_slot_label" data-bind="
                        text: {
                            &#39;blank&#39;: &#39;Blank&#39;,
                            &#39;single&#39;: &#39;Simple&#39;,
                            &#39;multi&#39;: &#39;Complex&#39;,
                            &#39;fractal&#39;: &#39;Fractal&#39;,
                            &#39;conduit&#39;: &#39;Conduit&#39;,
                            &#39;capacitor&#39;: &#39;Capacitor&#39;,
                            &#39;relay&#39;: &#39;Relay&#39;,
                            &#39;hopper&#39;: &#39;Hopper&#39;,
                        }[ss.mode()]
                    ">Blank</div>
                    <div class="shop_slot">
                        <!-- ko if: ss.part() -->
                            <!-- ko with: {ss: ss, part: ss.part(), shell: ss.shell } -->
                                <!-- ko template: {
                                        name: 'kot/part.html',
                                        data: part,
                                        as: 'part',
                                        shell: ss.shell,
                                } --><div class="part" data-bind="
	draggable: {
		dragObject: part,
		restrict: {
			restriction: &#39;.part_sandbox&#39;
		},
		onstart: function(ev) {
			/* Actually I already know where it needs to go.. */
			ev.target.setAttribute(&#39;data-x&#39;, 0);
			ev.target.setAttribute(&#39;data-y&#39;, 0);
			ev.target.style.transition = &#39;&#39;;
			game.dragging_part(part);

		},
		onend: function(ev) {
				ev.target.style.transition = &#39;transform 0.25s&#39;;
				ev.target.style.transform = &#39;&#39;;
				game.dragging_part(null);
		},
		onmove: function(event) {
			var target = event.target,
		        // keep the dragged position in the data-x/data-y attributes
		        x = (parseFloat(target.getAttribute(&#39;data-x&#39;)) || 0) + event.dx,
		        y = (parseFloat(target.getAttribute(&#39;data-y&#39;)) || 0) + event.dy;

		    // translate the element
		    target.style.webkitTransform =
		    target.style.transform =
		      &#39;translate(&#39; + x + &#39;px, &#39; + y + &#39;px)&#39;;

		    // update the posiion attributes
		    target.setAttribute(&#39;data-x&#39;, x);
		    target.setAttribute(&#39;data-y&#39;, y);
		},
		snap: {

		}
	},
	double_tap: _.bind(part.double_tap, part),
	tap: _.bind(part.tap, part),
	qtip_template: {
		name: &#39;kot/part_tooltip.html&#39;,
		data: part,
		as: &#39;part&#39;,
		qtip: {
			&#39;show&#39;: {
				&#39;effect&#39;: false,
			},
			&#39;title&#39;: &#39;title1&#39;,
			&#39;content&#39;: {
				&#39;title&#39;: part.name(),
				&#39;text&#39;: &#39;foo&#39;,
			},
			&#39;style&#39;: {
				&#39;classes&#39;: &#39;qtip-dark&#39;
			},
			&#39;hide&#39;: {
				&#39;fixed&#39;: false,
				&#39;effect&#39;: false,
			},
			&#39;position&#39;: {
				&#39;my&#39;: &#39;top left&#39;,
				&#39;at&#39;: &#39;top right&#39;,
			}
		}
	}
" data-hasqtip="0">
	<div class="part_raph" data-bind="
		raphael: _.bind(part.raph, part)
	"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.700012px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><path fill="none" stroke="#a57164" d="M57,30L43.5,6.6173140978201594L16.500000000000007,6.617314097820156L3,29.999999999999996L16.499999999999986,53.382685902179844L43.5,53.382685902179844Z" stroke-width="3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#111111" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-opacity="0"></path><path fill="#111111" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#111111" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#111111" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#111111" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#111111" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M60,30L45,4.019237886466843L15.000000000000007,4.01923788646684L0,29.999999999999996L14.999999999999986,55.98076211353315L45,55.98076211353316Z" stroke-width="3" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path><path fill="none" stroke="#000000" d="M63,30L46.5,1.4211616751135274L13.500000000000007,1.4211616751135239L-3,29.999999999999996L13.499999999999986,58.57883832488647L46.5,58.578838324886476Z" stroke-width="5" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path></svg>
		<div class="glyph_holder no_glyphs" data-bind="css: part.glyph_holder_css()">
			<span class="glyph glyph1 magi none" data-bind="css: part.glyph_classes()[0]"></span>
			<span class="glyph glyph2 magi none" data-bind="css: part.glyph_classes()[1]"></span>
			<span class="glyph glyph3 magi none" data-bind="css: part.glyph_classes()[2]"></span>

		</div>
	</div>
</div><!-- /ko -->
                            <!-- /ko -->
                        <!-- /ko -->
                    </div>
                    <!-- ko if: ss.part() -->
                    <div class="shop_price">
                        <i class="icon-mana"></i>
                        <span data-bind="text: ss.part().mana_cost().formatBig()">1.00K</span>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: ss.mode() === 'single' || ss.mode() === 'multi' --><!-- /ko -->
                    <div class="tier_selector" data-bind="visible: ss.max_tier() &gt; 1" style="display: none;">
                        <button class="tier_down" data-bind="
                            disable: ss.tier() &lt;= 1,
                            click: function() {
                                ss.tier.inc(-1);
                                ss.restock();
                            }
                        " disabled="">-</button>
                        <span class="tier" data-bind="text: ss.tier()">1</span>
                        <button class="tier_up" data-bind="
                            disable: ss.tier() &gt;= ss.max_tier(),
                            click: function() {
                                ss.tier.inc(1);
                                ss.restock();
                            }
                        " disabled="">+</button>

                    </div>
                </div>
            
                <div class="shop_entry">
                    <div class="shop_slot_label" data-bind="
                        text: {
                            &#39;blank&#39;: &#39;Blank&#39;,
                            &#39;single&#39;: &#39;Simple&#39;,
                            &#39;multi&#39;: &#39;Complex&#39;,
                            &#39;fractal&#39;: &#39;Fractal&#39;,
                            &#39;conduit&#39;: &#39;Conduit&#39;,
                            &#39;capacitor&#39;: &#39;Capacitor&#39;,
                            &#39;relay&#39;: &#39;Relay&#39;,
                            &#39;hopper&#39;: &#39;Hopper&#39;,
                        }[ss.mode()]
                    ">Simple</div>
                    <div class="shop_slot">
                        <!-- ko if: ss.part() -->
                            <!-- ko with: {ss: ss, part: ss.part(), shell: ss.shell } -->
                                <!-- ko template: {
                                        name: 'kot/part.html',
                                        data: part,
                                        as: 'part',
                                        shell: ss.shell,
                                } --><div class="part" data-bind="
	draggable: {
		dragObject: part,
		restrict: {
			restriction: &#39;.part_sandbox&#39;
		},
		onstart: function(ev) {
			/* Actually I already know where it needs to go.. */
			ev.target.setAttribute(&#39;data-x&#39;, 0);
			ev.target.setAttribute(&#39;data-y&#39;, 0);
			ev.target.style.transition = &#39;&#39;;
			game.dragging_part(part);

		},
		onend: function(ev) {
				ev.target.style.transition = &#39;transform 0.25s&#39;;
				ev.target.style.transform = &#39;&#39;;
				game.dragging_part(null);
		},
		onmove: function(event) {
			var target = event.target,
		        // keep the dragged position in the data-x/data-y attributes
		        x = (parseFloat(target.getAttribute(&#39;data-x&#39;)) || 0) + event.dx,
		        y = (parseFloat(target.getAttribute(&#39;data-y&#39;)) || 0) + event.dy;

		    // translate the element
		    target.style.webkitTransform =
		    target.style.transform =
		      &#39;translate(&#39; + x + &#39;px, &#39; + y + &#39;px)&#39;;

		    // update the posiion attributes
		    target.setAttribute(&#39;data-x&#39;, x);
		    target.setAttribute(&#39;data-y&#39;, y);
		},
		snap: {

		}
	},
	double_tap: _.bind(part.double_tap, part),
	tap: _.bind(part.tap, part),   
	qtip_template: {
		name: &#39;kot/part_tooltip.html&#39;,
		data: part,
		as: &#39;part&#39;,
		qtip: {
			&#39;show&#39;: {
				&#39;effect&#39;: false,
			},
			&#39;title&#39;: &#39;title1&#39;,
			&#39;content&#39;: {
				&#39;title&#39;: part.name(),
				&#39;text&#39;: &#39;foo&#39;,
			},
			&#39;style&#39;: {
				&#39;classes&#39;: &#39;qtip-dark&#39;
			},
			&#39;hide&#39;: {
				&#39;fixed&#39;: false,
				&#39;effect&#39;: false,
			},
			&#39;position&#39;: {
				&#39;my&#39;: &#39;top left&#39;,
				&#39;at&#39;: &#39;top right&#39;,
			}
		}
	}
" data-hasqtip="28" aria-describedby="qtip-28">
	<div class="part_raph" data-bind="
		raphael: _.bind(part.raph, part)
	"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.700073px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><path fill="none" stroke="#a57164" d="M57,30L43.5,6.6173140978201594L16.500000000000007,6.617314097820156L3,29.999999999999996L16.499999999999986,53.382685902179844L43.5,53.382685902179844Z" stroke-width="3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#0000ff" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" fill-opacity="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#0000ff" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" fill-opacity="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#0000ff" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" fill-opacity="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#0000ff" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" fill-opacity="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#0000ff" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" fill-opacity="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#0000ff" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" fill-opacity="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" fill-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M60,30L45,4.019237886466843L15.000000000000007,4.01923788646684L0,29.999999999999996L14.999999999999986,55.98076211353315L45,55.98076211353316Z" stroke-width="3" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path><path fill="none" stroke="#000000" d="M63,30L46.5,1.4211616751135274L13.500000000000007,1.4211616751135239L-3,29.999999999999996L13.499999999999986,58.57883832488647L46.5,58.578838324886476Z" stroke-width="5" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path></svg>
		<div class="glyph_holder one_glyph" data-bind="css: part.glyph_holder_css()">
			<span class="glyph glyph1 magi icon-resonance" data-bind="css: part.glyph_classes()[0]"></span>
			<span class="glyph glyph2 magi none" data-bind="css: part.glyph_classes()[1]"></span>
			<span class="glyph glyph3 magi none" data-bind="css: part.glyph_classes()[2]"></span>

		</div>
	</div>
</div><!-- /ko -->
                            <!-- /ko -->
                        <!-- /ko -->
                    </div>
                    <!-- ko if: ss.part() -->
                    <div class="shop_price">
                        <i class="icon-mana"></i>
                        <span data-bind="text: ss.part().mana_cost().formatBig()">2.00K</span>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: ss.mode() === 'single' || ss.mode() === 'multi' -->
                    <div>
                        <button data-bind="click: function() { ss.restock(); }">Reroll</button>
                        <!-- ko if: ss.mode() === 'single' -->
                        <button data-bind="click: function(event) { ss.next_stat(); }">&gt;</button>
                        <!-- /ko -->
                    </div>
                    <!-- /ko -->
                    <div class="tier_selector" data-bind="visible: ss.max_tier() &gt; 1" style="display: none;">
                        <button class="tier_down" data-bind="
                            disable: ss.tier() &lt;= 1,
                            click: function() {
                                ss.tier.inc(-1);
                                ss.restock();
                            }
                        " disabled="">-</button>
                        <span class="tier" data-bind="text: ss.tier()">1</span>
                        <button class="tier_up" data-bind="
                            disable: ss.tier() &gt;= ss.max_tier(),
                            click: function() {
                                ss.tier.inc(1);
                                ss.restock();
                            }
                        " disabled="">+</button>

                    </div>
                </div>
            
                <div class="shop_entry">
                    <div class="shop_slot_label" data-bind="
                        text: {
                            &#39;blank&#39;: &#39;Blank&#39;,
                            &#39;single&#39;: &#39;Simple&#39;,
                            &#39;multi&#39;: &#39;Complex&#39;,
                            &#39;fractal&#39;: &#39;Fractal&#39;,
                            &#39;conduit&#39;: &#39;Conduit&#39;,
                            &#39;capacitor&#39;: &#39;Capacitor&#39;,
                            &#39;relay&#39;: &#39;Relay&#39;,
                            &#39;hopper&#39;: &#39;Hopper&#39;,
                        }[ss.mode()]
                    ">Complex</div>
                    <div class="shop_slot">
                        <!-- ko if: ss.part() -->
                            <!-- ko with: {ss: ss, part: ss.part(), shell: ss.shell } -->
                                <!-- ko template: {
                                        name: 'kot/part.html',
                                        data: part,
                                        as: 'part',
                                        shell: ss.shell,
                                } --><div class="part" data-bind="
	draggable: {
		dragObject: part,
		restrict: {
			restriction: &#39;.part_sandbox&#39;
		},
		onstart: function(ev) {
			/* Actually I already know where it needs to go.. */
			ev.target.setAttribute(&#39;data-x&#39;, 0);
			ev.target.setAttribute(&#39;data-y&#39;, 0);
			ev.target.style.transition = &#39;&#39;;
			game.dragging_part(part);

		},
		onend: function(ev) {
				ev.target.style.transition = &#39;transform 0.25s&#39;;
				ev.target.style.transform = &#39;&#39;;
				game.dragging_part(null);
		},
		onmove: function(event) {
			var target = event.target,
		        // keep the dragged position in the data-x/data-y attributes
		        x = (parseFloat(target.getAttribute(&#39;data-x&#39;)) || 0) + event.dx,
		        y = (parseFloat(target.getAttribute(&#39;data-y&#39;)) || 0) + event.dy;

		    // translate the element
		    target.style.webkitTransform =
		    target.style.transform =
		      &#39;translate(&#39; + x + &#39;px, &#39; + y + &#39;px)&#39;;

		    // update the posiion attributes
		    target.setAttribute(&#39;data-x&#39;, x);
		    target.setAttribute(&#39;data-y&#39;, y);
		},
		snap: {

		}
	},
	double_tap: _.bind(part.double_tap, part),
	tap: _.bind(part.tap, part),
	qtip_template: {
		name: &#39;kot/part_tooltip.html&#39;,
		data: part,
		as: &#39;part&#39;,
		qtip: {
			&#39;show&#39;: {
				&#39;effect&#39;: false,
			},
			&#39;title&#39;: &#39;title1&#39;,
			&#39;content&#39;: {
				&#39;title&#39;: part.name(),
				&#39;text&#39;: &#39;foo&#39;,
			},
			&#39;style&#39;: {
				&#39;classes&#39;: &#39;qtip-dark&#39;
			},
			&#39;hide&#39;: {
				&#39;fixed&#39;: false,
				&#39;effect&#39;: false,
			},
			&#39;position&#39;: {
				&#39;my&#39;: &#39;top left&#39;,
				&#39;at&#39;: &#39;top right&#39;,
			}
		}
	}
" data-hasqtip="20" aria-describedby="qtip-20">
	<div class="part_raph" data-bind="
		raphael: _.bind(part.raph, part)
	"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.700012px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><path fill="none" stroke="#a57164" d="M57,30L43.5,6.6173140978201594L16.500000000000007,6.617314097820156L3,29.999999999999996L16.499999999999986,53.382685902179844L43.5,53.382685902179844Z" stroke-width="3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ff002b" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" fill-opacity="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#1aff00" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" fill-opacity="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#1aff00" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" fill-opacity="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#1aff00" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" fill-opacity="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#d400ff" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" fill-opacity="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ff002b" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" fill-opacity="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" fill-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" fill-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M60,30L45,4.019237886466843L15.000000000000007,4.01923788646684L0,29.999999999999996L14.999999999999986,55.98076211353315L45,55.98076211353316Z" stroke-width="3" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path><path fill="none" stroke="#000000" d="M63,30L46.5,1.4211616751135274L13.500000000000007,1.4211616751135239L-3,29.999999999999996L13.499999999999986,58.57883832488647L46.5,58.578838324886476Z" stroke-width="5" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path></svg>
		<div class="glyph_holder three_glyphs" data-bind="css: part.glyph_holder_css()">
			<span class="glyph glyph1 magi icon-imbuing" data-bind="css: part.glyph_classes()[0]"></span>
			<span class="glyph glyph2 magi icon-shimmer" data-bind="css: part.glyph_classes()[1]"></span>
			<span class="glyph glyph3 magi icon-purity" data-bind="css: part.glyph_classes()[2]"></span>

		</div>
	</div>
</div><!-- /ko -->
                            <!-- /ko -->
                        <!-- /ko -->
                    </div>
                    <!-- ko if: ss.part() -->
                    <div class="shop_price">
                        <i class="icon-mana"></i>
                        <span data-bind="text: ss.part().mana_cost().formatBig()">2.00K</span>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: ss.mode() === 'single' || ss.mode() === 'multi' -->
                    <div>
                        <button data-bind="click: function() { ss.restock(); }">Reroll</button>
                        <!-- ko if: ss.mode() === 'single' --><!-- /ko -->
                    </div>
                    <!-- /ko -->
                    <div class="tier_selector" data-bind="visible: ss.max_tier() &gt; 1" style="display: none;">
                        <button class="tier_down" data-bind="
                            disable: ss.tier() &lt;= 1,
                            click: function() {
                                ss.tier.inc(-1);
                                ss.restock();
                            }
                        " disabled="">-</button>
                        <span class="tier" data-bind="text: ss.tier()">1</span>
                        <button class="tier_up" data-bind="
                            disable: ss.tier() &gt;= ss.max_tier(),
                            click: function() {
                                ss.tier.inc(1);
                                ss.restock();
                            }
                        " disabled="">+</button>

                    </div>
                </div>
            
                <div class="shop_entry">
                    <div class="shop_slot_label" data-bind="
                        text: {
                            &#39;blank&#39;: &#39;Blank&#39;,
                            &#39;single&#39;: &#39;Simple&#39;,
                            &#39;multi&#39;: &#39;Complex&#39;,
                            &#39;fractal&#39;: &#39;Fractal&#39;,
                            &#39;conduit&#39;: &#39;Conduit&#39;,
                            &#39;capacitor&#39;: &#39;Capacitor&#39;,
                            &#39;relay&#39;: &#39;Relay&#39;,
                            &#39;hopper&#39;: &#39;Hopper&#39;,
                        }[ss.mode()]
                    ">Relay</div>
                    <div class="shop_slot">
                        <!-- ko if: ss.part() -->
                            <!-- ko with: {ss: ss, part: ss.part(), shell: ss.shell } -->
                                <!-- ko template: {
                                        name: 'kot/part.html',
                                        data: part,
                                        as: 'part',
                                        shell: ss.shell,
                                } --><div class="part" data-bind="
	draggable: {
		dragObject: part,
		restrict: {
			restriction: &#39;.part_sandbox&#39;
		},
		onstart: function(ev) {
			/* Actually I already know where it needs to go.. */
			ev.target.setAttribute(&#39;data-x&#39;, 0);
			ev.target.setAttribute(&#39;data-y&#39;, 0);
			ev.target.style.transition = &#39;&#39;;
			game.dragging_part(part);

		},
		onend: function(ev) {
				ev.target.style.transition = &#39;transform 0.25s&#39;;
				ev.target.style.transform = &#39;&#39;;
				game.dragging_part(null);
		},
		onmove: function(event) {
			var target = event.target,
		        // keep the dragged position in the data-x/data-y attributes
		        x = (parseFloat(target.getAttribute(&#39;data-x&#39;)) || 0) + event.dx,
		        y = (parseFloat(target.getAttribute(&#39;data-y&#39;)) || 0) + event.dy;

		    // translate the element
		    target.style.webkitTransform =
		    target.style.transform =
		      &#39;translate(&#39; + x + &#39;px, &#39; + y + &#39;px)&#39;;

		    // update the posiion attributes
		    target.setAttribute(&#39;data-x&#39;, x);
		    target.setAttribute(&#39;data-y&#39;, y);
		},
		snap: {

		}
	},
	double_tap: _.bind(part.double_tap, part),
	tap: _.bind(part.tap, part),
	qtip_template: {
		name: &#39;kot/part_tooltip.html&#39;,
		data: part,
		as: &#39;part&#39;,
		qtip: {
			&#39;show&#39;: {
				&#39;effect&#39;: false,
			},
			&#39;title&#39;: &#39;title1&#39;,
			&#39;content&#39;: {
				&#39;title&#39;: part.name(),
				&#39;text&#39;: &#39;foo&#39;,
			},
			&#39;style&#39;: {
				&#39;classes&#39;: &#39;qtip-dark&#39;
			},
			&#39;hide&#39;: {
				&#39;fixed&#39;: false,
				&#39;effect&#39;: false,
			},
			&#39;position&#39;: {
				&#39;my&#39;: &#39;top left&#39;,
				&#39;at&#39;: &#39;top right&#39;,
			}
		}
	}
" data-hasqtip="3">
	<div class="part_raph" data-bind="
		raphael: _.bind(part.raph, part)
	"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.700073px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><path fill="none" stroke="#a57164" d="M57,30L43.5,6.6173140978201594L16.500000000000007,6.617314097820156L3,29.999999999999996L16.499999999999986,53.382685902179844L43.5,53.382685902179844Z" stroke-width="3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#cccc99" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#99cccc" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#cccc99" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#cccc99" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#99cccc" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#cccc99" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" fill-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M60,30L45,4.019237886466843L15.000000000000007,4.01923788646684L0,29.999999999999996L14.999999999999986,55.98076211353315L45,55.98076211353316Z" stroke-width="3" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path><path fill="none" stroke="#000000" d="M63,30L46.5,1.4211616751135274L13.500000000000007,1.4211616751135239L-3,29.999999999999996L13.499999999999986,58.57883832488647L46.5,58.578838324886476Z" stroke-width="5" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path></svg>
		<div class="glyph_holder one_glyph" data-bind="css: part.glyph_holder_css()">
			<span class="glyph glyph1 magi icon-relay" data-bind="css: part.glyph_classes()[0]"></span>
			<span class="glyph glyph2 magi" data-bind="css: part.glyph_classes()[1]"></span>
			<span class="glyph glyph3 magi" data-bind="css: part.glyph_classes()[2]"></span>

		</div>
	</div>
</div><!-- /ko -->
                            <!-- /ko -->
                        <!-- /ko -->
                    </div>
                    <!-- ko if: ss.part() -->
                    <div class="shop_price">
                        <i class="icon-mana"></i>
                        <span data-bind="text: ss.part().mana_cost().formatBig()">10.0K</span>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: ss.mode() === 'single' || ss.mode() === 'multi' --><!-- /ko -->
                    <div class="tier_selector" data-bind="visible: ss.max_tier() &gt; 1" style="display: none;">
                        <button class="tier_down" data-bind="
                            disable: ss.tier() &lt;= 1,
                            click: function() {
                                ss.tier.inc(-1);
                                ss.restock();
                            }
                        " disabled="">-</button>
                        <span class="tier" data-bind="text: ss.tier()">1</span>
                        <button class="tier_up" data-bind="
                            disable: ss.tier() &gt;= ss.max_tier(),
                            click: function() {
                                ss.tier.inc(1);
                                ss.restock();
                            }
                        " disabled="">+</button>

                    </div>
                </div>
            
                <div class="shop_entry">
                    <div class="shop_slot_label" data-bind="
                        text: {
                            &#39;blank&#39;: &#39;Blank&#39;,
                            &#39;single&#39;: &#39;Simple&#39;,
                            &#39;multi&#39;: &#39;Complex&#39;,
                            &#39;fractal&#39;: &#39;Fractal&#39;,
                            &#39;conduit&#39;: &#39;Conduit&#39;,
                            &#39;capacitor&#39;: &#39;Capacitor&#39;,
                            &#39;relay&#39;: &#39;Relay&#39;,
                            &#39;hopper&#39;: &#39;Hopper&#39;,
                        }[ss.mode()]
                    ">Capacitor</div>
                    <div class="shop_slot">
                        <!-- ko if: ss.part() -->
                            <!-- ko with: {ss: ss, part: ss.part(), shell: ss.shell } -->
                                <!-- ko template: {
                                        name: 'kot/part.html',
                                        data: part,
                                        as: 'part',
                                        shell: ss.shell,
                                } --><div class="part" data-bind="
	draggable: {
		dragObject: part,
		restrict: {
			restriction: &#39;.part_sandbox&#39;
		},
		onstart: function(ev) {
			/* Actually I already know where it needs to go.. */
			ev.target.setAttribute(&#39;data-x&#39;, 0);
			ev.target.setAttribute(&#39;data-y&#39;, 0);
			ev.target.style.transition = &#39;&#39;;
			game.dragging_part(part);

		},
		onend: function(ev) {
				ev.target.style.transition = &#39;transform 0.25s&#39;;
				ev.target.style.transform = &#39;&#39;;
				game.dragging_part(null);
		},
		onmove: function(event) {
			var target = event.target,
		        // keep the dragged position in the data-x/data-y attributes
		        x = (parseFloat(target.getAttribute(&#39;data-x&#39;)) || 0) + event.dx,
		        y = (parseFloat(target.getAttribute(&#39;data-y&#39;)) || 0) + event.dy;

		    // translate the element
		    target.style.webkitTransform =
		    target.style.transform =
		      &#39;translate(&#39; + x + &#39;px, &#39; + y + &#39;px)&#39;;

		    // update the posiion attributes
		    target.setAttribute(&#39;data-x&#39;, x);
		    target.setAttribute(&#39;data-y&#39;, y);
		},
		snap: {

		}
	},
	double_tap: _.bind(part.double_tap, part),
	tap: _.bind(part.tap, part),
	qtip_template: {
		name: &#39;kot/part_tooltip.html&#39;,
		data: part,
		as: &#39;part&#39;,
		qtip: {
			&#39;show&#39;: {
				&#39;effect&#39;: false,
			},
			&#39;title&#39;: &#39;title1&#39;,
			&#39;content&#39;: {
				&#39;title&#39;: part.name(),
				&#39;text&#39;: &#39;foo&#39;,
			},
			&#39;style&#39;: {
				&#39;classes&#39;: &#39;qtip-dark&#39;
			},
			&#39;hide&#39;: {
				&#39;fixed&#39;: false,
				&#39;effect&#39;: false,
			},
			&#39;position&#39;: {
				&#39;my&#39;: &#39;top left&#39;,
				&#39;at&#39;: &#39;top right&#39;,
			}
		}
	}
" data-hasqtip="4">
	<div class="part_raph" data-bind="
		raphael: _.bind(part.raph, part)
	"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.700012px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><path fill="none" stroke="#a57164" d="M57,30L43.5,6.6173140978201594L16.500000000000007,6.617314097820156L3,29.999999999999996L16.499999999999986,53.382685902179844L43.5,53.382685902179844Z" stroke-width="3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#eeeeee" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffbbbb" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#eeeeee" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#eeeeee" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffbbbb" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#eeeeee" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M60,30L45,4.019237886466843L15.000000000000007,4.01923788646684L0,29.999999999999996L14.999999999999986,55.98076211353315L45,55.98076211353316Z" stroke-width="3" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path><path fill="none" stroke="#000000" d="M63,30L46.5,1.4211616751135274L13.500000000000007,1.4211616751135239L-3,29.999999999999996L13.499999999999986,58.57883832488647L46.5,58.578838324886476Z" stroke-width="5" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path></svg>
		<div class="glyph_holder one_glyph" data-bind="css: part.glyph_holder_css()">
			<span class="glyph glyph1 magi icon-capacitor" data-bind="css: part.glyph_classes()[0]"></span>
			<span class="glyph glyph2 magi" data-bind="css: part.glyph_classes()[1]"></span>
			<span class="glyph glyph3 magi" data-bind="css: part.glyph_classes()[2]"></span>

		</div>
	</div>
</div><!-- /ko -->
                            <!-- /ko -->
                        <!-- /ko -->
                    </div>
                    <!-- ko if: ss.part() -->
                    <div class="shop_price">
                        <i class="icon-mana"></i>
                        <span data-bind="text: ss.part().mana_cost().formatBig()">10.0K</span>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: ss.mode() === 'single' || ss.mode() === 'multi' --><!-- /ko -->
                    <div class="tier_selector" data-bind="visible: ss.max_tier() &gt; 1" style="display: none;">
                        <button class="tier_down" data-bind="
                            disable: ss.tier() &lt;= 1,
                            click: function() {
                                ss.tier.inc(-1);
                                ss.restock();
                            }
                        " disabled="">-</button>
                        <span class="tier" data-bind="text: ss.tier()">1</span>
                        <button class="tier_up" data-bind="
                            disable: ss.tier() &gt;= ss.max_tier(),
                            click: function() {
                                ss.tier.inc(1);
                                ss.restock();
                            }
                        " disabled="">+</button>

                    </div>
                </div>
            
                <div class="shop_entry">
                    <div class="shop_slot_label" data-bind="
                        text: {
                            &#39;blank&#39;: &#39;Blank&#39;,
                            &#39;single&#39;: &#39;Simple&#39;,
                            &#39;multi&#39;: &#39;Complex&#39;,
                            &#39;fractal&#39;: &#39;Fractal&#39;,
                            &#39;conduit&#39;: &#39;Conduit&#39;,
                            &#39;capacitor&#39;: &#39;Capacitor&#39;,
                            &#39;relay&#39;: &#39;Relay&#39;,
                            &#39;hopper&#39;: &#39;Hopper&#39;,
                        }[ss.mode()]
                    ">Hopper</div>
                    <div class="shop_slot">
                        <!-- ko if: ss.part() -->
                            <!-- ko with: {ss: ss, part: ss.part(), shell: ss.shell } -->
                                <!-- ko template: {
                                        name: 'kot/part.html',
                                        data: part,
                                        as: 'part',
                                        shell: ss.shell,
                                } --><div class="part" data-bind="
	draggable: {
		dragObject: part,
		restrict: {
			restriction: &#39;.part_sandbox&#39;
		},
		onstart: function(ev) {
			/* Actually I already know where it needs to go.. */
			ev.target.setAttribute(&#39;data-x&#39;, 0);
			ev.target.setAttribute(&#39;data-y&#39;, 0);
			ev.target.style.transition = &#39;&#39;;
			game.dragging_part(part);

		},
		onend: function(ev) {
				ev.target.style.transition = &#39;transform 0.25s&#39;;
				ev.target.style.transform = &#39;&#39;;
				game.dragging_part(null);
		},
		onmove: function(event) {
			var target = event.target,
		        // keep the dragged position in the data-x/data-y attributes
		        x = (parseFloat(target.getAttribute(&#39;data-x&#39;)) || 0) + event.dx,
		        y = (parseFloat(target.getAttribute(&#39;data-y&#39;)) || 0) + event.dy;

		    // translate the element
		    target.style.webkitTransform =
		    target.style.transform =
		      &#39;translate(&#39; + x + &#39;px, &#39; + y + &#39;px)&#39;;

		    // update the posiion attributes
		    target.setAttribute(&#39;data-x&#39;, x);
		    target.setAttribute(&#39;data-y&#39;, y);
		},
		snap: {

		}
	},
	double_tap: _.bind(part.double_tap, part),
	tap: _.bind(part.tap, part),
	qtip_template: {
		name: &#39;kot/part_tooltip.html&#39;,
		data: part,
		as: &#39;part&#39;,
		qtip: {
			&#39;show&#39;: {
				&#39;effect&#39;: false,
			},
			&#39;title&#39;: &#39;title1&#39;,
			&#39;content&#39;: {
				&#39;title&#39;: part.name(),
				&#39;text&#39;: &#39;foo&#39;,
			},
			&#39;style&#39;: {
				&#39;classes&#39;: &#39;qtip-dark&#39;
			},
			&#39;hide&#39;: {
				&#39;fixed&#39;: false,
				&#39;effect&#39;: false,
			},
			&#39;position&#39;: {
				&#39;my&#39;: &#39;top left&#39;,
				&#39;at&#39;: &#39;top right&#39;,
			}
		}
	}
" data-hasqtip="5">
	<div class="part_raph" data-bind="
		raphael: _.bind(part.raph, part)
	"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.700073px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><path fill="none" stroke="#a57164" d="M57,30L43.5,6.6173140978201594L16.500000000000007,6.617314097820156L3,29.999999999999996L16.499999999999986,53.382685902179844L43.5,53.382685902179844Z" stroke-width="3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#eeeeff" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#cc9999" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#eeeeff" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#eeeeff" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#dd9999" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#eeeeff" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" fill-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M60,30L45,4.019237886466843L15.000000000000007,4.01923788646684L0,29.999999999999996L14.999999999999986,55.98076211353315L45,55.98076211353316Z" stroke-width="3" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path><path fill="none" stroke="#000000" d="M63,30L46.5,1.4211616751135274L13.500000000000007,1.4211616751135239L-3,29.999999999999996L13.499999999999986,58.57883832488647L46.5,58.578838324886476Z" stroke-width="5" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path></svg>
		<div class="glyph_holder one_glyph" data-bind="css: part.glyph_holder_css()">
			<span class="glyph glyph1 magi icon-hopper" data-bind="css: part.glyph_classes()[0]"></span>
			<span class="glyph glyph2 magi" data-bind="css: part.glyph_classes()[1]"></span>
			<span class="glyph glyph3 magi" data-bind="css: part.glyph_classes()[2]"></span>

		</div>
	</div>
</div><!-- /ko -->
                            <!-- /ko -->
                        <!-- /ko -->
                    </div>
                    <!-- ko if: ss.part() -->
                    <div class="shop_price">
                        <i class="icon-mana"></i>
                        <span data-bind="text: ss.part().mana_cost().formatBig()">10.0K</span>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: ss.mode() === 'single' || ss.mode() === 'multi' --><!-- /ko -->
                    <div class="tier_selector" data-bind="visible: ss.max_tier() &gt; 1" style="display: none;">
                        <button class="tier_down" data-bind="
                            disable: ss.tier() &lt;= 1,
                            click: function() {
                                ss.tier.inc(-1);
                                ss.restock();
                            }
                        " disabled="">-</button>
                        <span class="tier" data-bind="text: ss.tier()">1</span>
                        <button class="tier_up" data-bind="
                            disable: ss.tier() &gt;= ss.max_tier(),
                            click: function() {
                                ss.tier.inc(1);
                                ss.restock();
                            }
                        " disabled="">+</button>

                    </div>
                </div>
            
                <div class="shop_entry">
                    <div class="shop_slot_label" data-bind="
                        text: {
                            &#39;blank&#39;: &#39;Blank&#39;,
                            &#39;single&#39;: &#39;Simple&#39;,
                            &#39;multi&#39;: &#39;Complex&#39;,
                            &#39;fractal&#39;: &#39;Fractal&#39;,
                            &#39;conduit&#39;: &#39;Conduit&#39;,
                            &#39;capacitor&#39;: &#39;Capacitor&#39;,
                            &#39;relay&#39;: &#39;Relay&#39;,
                            &#39;hopper&#39;: &#39;Hopper&#39;,
                        }[ss.mode()]
                    ">Conduit</div>
                    <div class="shop_slot">
                        <!-- ko if: ss.part() -->
                            <!-- ko with: {ss: ss, part: ss.part(), shell: ss.shell } -->
                                <!-- ko template: {
                                        name: 'kot/part.html',
                                        data: part,
                                        as: 'part',
                                        shell: ss.shell,
                                } --><div class="part" data-bind="
	draggable: {
		dragObject: part,
		restrict: {
			restriction: &#39;.part_sandbox&#39;
		},
		onstart: function(ev) {
			/* Actually I already know where it needs to go.. */
			ev.target.setAttribute(&#39;data-x&#39;, 0);
			ev.target.setAttribute(&#39;data-y&#39;, 0);
			ev.target.style.transition = &#39;&#39;;
			game.dragging_part(part);

		},
		onend: function(ev) {
				ev.target.style.transition = &#39;transform 0.25s&#39;;
				ev.target.style.transform = &#39;&#39;;
				game.dragging_part(null);
		},
		onmove: function(event) {
			var target = event.target,
		        // keep the dragged position in the data-x/data-y attributes
		        x = (parseFloat(target.getAttribute(&#39;data-x&#39;)) || 0) + event.dx,
		        y = (parseFloat(target.getAttribute(&#39;data-y&#39;)) || 0) + event.dy;

		    // translate the element
		    target.style.webkitTransform =
		    target.style.transform =
		      &#39;translate(&#39; + x + &#39;px, &#39; + y + &#39;px)&#39;;

		    // update the posiion attributes
		    target.setAttribute(&#39;data-x&#39;, x);
		    target.setAttribute(&#39;data-y&#39;, y);
		},
		snap: {

		}
	},
	double_tap: _.bind(part.double_tap, part),
	tap: _.bind(part.tap, part),
	qtip_template: {
		name: &#39;kot/part_tooltip.html&#39;,
		data: part,
		as: &#39;part&#39;,
		qtip: {
			&#39;show&#39;: {
				&#39;effect&#39;: false,
			},
			&#39;title&#39;: &#39;title1&#39;,
			&#39;content&#39;: {
				&#39;title&#39;: part.name(),
				&#39;text&#39;: &#39;foo&#39;,
			},
			&#39;style&#39;: {
				&#39;classes&#39;: &#39;qtip-dark&#39;
			},
			&#39;hide&#39;: {
				&#39;fixed&#39;: false,
				&#39;effect&#39;: false,
			},
			&#39;position&#39;: {
				&#39;my&#39;: &#39;top left&#39;,
				&#39;at&#39;: &#39;top right&#39;,
			}
		}
	}
" data-hasqtip="6">
	<div class="part_raph" data-bind="
		raphael: _.bind(part.raph, part)
	"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.700012px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><path fill="none" stroke="#a57164" d="M57,30L43.5,6.6173140978201594L16.500000000000007,6.617314097820156L3,29.999999999999996L16.499999999999986,53.382685902179844L43.5,53.382685902179844Z" stroke-width="3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#eeeeee" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#999999" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#eeeeee" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#eeeeee" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#999999" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#eeeeee" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" fill-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M60,30L45,4.019237886466843L15.000000000000007,4.01923788646684L0,29.999999999999996L14.999999999999986,55.98076211353315L45,55.98076211353316Z" stroke-width="3" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path><path fill="none" stroke="#000000" d="M63,30L46.5,1.4211616751135274L13.500000000000007,1.4211616751135239L-3,29.999999999999996L13.499999999999986,58.57883832488647L46.5,58.578838324886476Z" stroke-width="5" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path></svg>
		<div class="glyph_holder one_glyph" data-bind="css: part.glyph_holder_css()">
			<span class="glyph glyph1 magi icon-conduit" data-bind="css: part.glyph_classes()[0]"></span>
			<span class="glyph glyph2 magi" data-bind="css: part.glyph_classes()[1]"></span>
			<span class="glyph glyph3 magi" data-bind="css: part.glyph_classes()[2]"></span>

		</div>
	</div>
</div><!-- /ko -->
                            <!-- /ko -->
                        <!-- /ko -->
                    </div>
                    <!-- ko if: ss.part() -->
                    <div class="shop_price">
                        <i class="icon-mana"></i>
                        <span data-bind="text: ss.part().mana_cost().formatBig()">10.0K</span>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: ss.mode() === 'single' || ss.mode() === 'multi' --><!-- /ko -->
                    <div class="tier_selector" data-bind="visible: ss.max_tier() &gt; 1" style="display: none;">
                        <button class="tier_down" data-bind="
                            disable: ss.tier() &lt;= 1,
                            click: function() {
                                ss.tier.inc(-1);
                                ss.restock();
                            }
                        " disabled="">-</button>
                        <span class="tier" data-bind="text: ss.tier()">1</span>
                        <button class="tier_up" data-bind="
                            disable: ss.tier() &gt;= ss.max_tier(),
                            click: function() {
                                ss.tier.inc(1);
                                ss.restock();
                            }
                        " disabled="">+</button>

                    </div>
                </div>
            
                <div class="shop_entry">
                    <div class="shop_slot_label" data-bind="
                        text: {
                            &#39;blank&#39;: &#39;Blank&#39;,
                            &#39;single&#39;: &#39;Simple&#39;,
                            &#39;multi&#39;: &#39;Complex&#39;,
                            &#39;fractal&#39;: &#39;Fractal&#39;,
                            &#39;conduit&#39;: &#39;Conduit&#39;,
                            &#39;capacitor&#39;: &#39;Capacitor&#39;,
                            &#39;relay&#39;: &#39;Relay&#39;,
                            &#39;hopper&#39;: &#39;Hopper&#39;,
                        }[ss.mode()]
                    ">Fractal</div>
                    <div class="shop_slot">
                        <!-- ko if: ss.part() -->
                            <!-- ko with: {ss: ss, part: ss.part(), shell: ss.shell } -->
                                <!-- ko template: {
                                        name: 'kot/part.html',
                                        data: part,
                                        as: 'part',
                                        shell: ss.shell,
                                } --><div class="part" data-bind="
	draggable: {
		dragObject: part,
		restrict: {
			restriction: &#39;.part_sandbox&#39;
		},
		onstart: function(ev) {
			/* Actually I already know where it needs to go.. */
			ev.target.setAttribute(&#39;data-x&#39;, 0);
			ev.target.setAttribute(&#39;data-y&#39;, 0);
			ev.target.style.transition = &#39;&#39;;
			game.dragging_part(part);

		},
		onend: function(ev) {
				ev.target.style.transition = &#39;transform 0.25s&#39;;
				ev.target.style.transform = &#39;&#39;;
				game.dragging_part(null);
		},
		onmove: function(event) {
			var target = event.target,
		        // keep the dragged position in the data-x/data-y attributes
		        x = (parseFloat(target.getAttribute(&#39;data-x&#39;)) || 0) + event.dx,
		        y = (parseFloat(target.getAttribute(&#39;data-y&#39;)) || 0) + event.dy;

		    // translate the element
		    target.style.webkitTransform =
		    target.style.transform =
		      &#39;translate(&#39; + x + &#39;px, &#39; + y + &#39;px)&#39;;

		    // update the posiion attributes
		    target.setAttribute(&#39;data-x&#39;, x);
		    target.setAttribute(&#39;data-y&#39;, y);
		},
		snap: {

		}
	},
	double_tap: _.bind(part.double_tap, part),
	tap: _.bind(part.tap, part),
	qtip_template: {
		name: &#39;kot/part_tooltip.html&#39;,
		data: part,
		as: &#39;part&#39;,
		qtip: {
			&#39;show&#39;: {
				&#39;effect&#39;: false,
			},
			&#39;title&#39;: &#39;title1&#39;,
			&#39;content&#39;: {
				&#39;title&#39;: part.name(),
				&#39;text&#39;: &#39;foo&#39;,
			},
			&#39;style&#39;: {
				&#39;classes&#39;: &#39;qtip-dark&#39;
			},
			&#39;hide&#39;: {
				&#39;fixed&#39;: false,
				&#39;effect&#39;: false,
			},
			&#39;position&#39;: {
				&#39;my&#39;: &#39;top left&#39;,
				&#39;at&#39;: &#39;top right&#39;,
			}
		}
	}
" data-hasqtip="7">
	<div class="part_raph" data-bind="
		raphael: _.bind(part.raph, part)
	"><svg height="60" version="1.1" width="60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.700073px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><path fill="#323232" stroke="#a57164" d="M57,30L43.5,6.6173140978201594L16.500000000000007,6.617314097820156L3,29.999999999999996L16.499999999999986,53.382685902179844L43.5,53.382685902179844Z" stroke-width="3" fill-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#111111" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#111111" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#111111" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#111111" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#111111" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#111111" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L54,30L42,9.215390309173472Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L42,9.215390309173472L18.000000000000007,9.215390309173472Z" stroke-opacity="0" fill-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L18.000000000000007,9.215390309173472L6,29.999999999999996Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#000000" d="M30,30L6,29.999999999999996L17.99999999999999,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L17.99999999999999,50.78460969082653L42,50.78460969082653Z" stroke-opacity="0" fill-opacity="0.125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#ffffff" stroke="#000000" d="M30,30L42,50.78460969082653L54,30Z" stroke-opacity="0" fill-opacity="0.075" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M60,30L45,4.019237886466843L15.000000000000007,4.01923788646684L0,29.999999999999996L14.999999999999986,55.98076211353315L45,55.98076211353316Z" stroke-width="3" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path><path fill="none" stroke="#000000" d="M63,30L46.5,1.4211616751135274L13.500000000000007,1.4211616751135239L-3,29.999999999999996L13.499999999999986,58.57883832488647L46.5,58.578838324886476Z" stroke-width="5" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-opacity: 0;"></path><path fill="#000000" stroke="#ffffff" d="M32.15,29.95L31.15,28.21794919243112L29.15,28.21794919243112L28.15,29.95L29.15,31.682050807568878L31.15,31.682050807568878Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M40.4,29.95L39.4,28.21794919243112L37.4,28.21794919243112L36.4,29.95L37.4,31.682050807568878L39.4,31.682050807568878Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M36.4,29.95L32.4,29.95" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M36.275,22.80529041877838L35.275,21.0732396112095L33.275,21.0732396112095L32.275,22.80529041877838L33.275,24.53734122634726L35.275,24.53734122634726Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M33.275,24.53734122634726L31.275,28.001442841485012" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M35.275,24.53734122634726L37.275,28.001442841485012" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M28.025,22.80529041877838L27.025,21.0732396112095L25.025,21.0732396112095L24.025,22.80529041877838L25.025,24.53734122634726L27.025,24.53734122634726Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M27.025,24.53734122634726L29.025,28.001442841485012" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M28.025,22.80529041877838L32.025,22.80529041877838" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M23.9,29.95L22.9,28.21794919243112L20.9,28.21794919243112L19.9,29.95L20.9,31.682050807568878L22.9,31.682050807568878Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M23.9,29.95L27.9,29.95" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M22.9,28.21794919243112L24.9,24.753847577293367" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M28.025,37.09470958122162L27.025,35.36265877365275L25.025,35.36265877365275L24.025,37.09470958122162L25.025,38.8267603887905L27.025,38.8267603887905Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M27.025,35.36265877365275L29.025,31.898557158514993" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M25.025,35.36265877365275L23.025,31.898557158514993" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M36.275,37.09470958122162L35.275,35.36265877365275L33.275,35.36265877365275L32.275,37.09470958122162L33.275,38.8267603887905L35.275,38.8267603887905Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M33.275,35.36265877365275L31.275,31.898557158514993" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M35.275,35.36265877365275L37.275,31.898557158514993" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M32.275,37.09470958122162L28.275,37.09470958122162" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M48.65,29.95L47.65,28.21794919243112L45.65,28.21794919243112L44.65,29.95L45.65,31.682050807568878L47.65,31.682050807568878Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M44.65,29.95L40.65,29.95" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M48.65,29.95L52.65,29.95" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M44.525,22.80529041877838L43.525,21.0732396112095L41.525,21.0732396112095L40.525,22.80529041877838L41.525,24.53734122634726L43.525,24.53734122634726Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M41.525,24.53734122634726L39.525,28.001442841485012" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M40.525,22.80529041877838L36.525,22.80529041877838" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M43.525,24.53734122634726L45.525,28.001442841485012" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M40.4,15.660580837556761L39.4,13.928530029987884L37.4,13.928530029987884L36.4,15.660580837556761L37.4,17.39263164512564L39.4,17.39263164512564Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M37.4,17.39263164512564L35.4,20.856733260263393" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M39.4,17.39263164512564L41.4,20.856733260263393" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M39.4,13.928530029987884L41.4,10.46442841485013" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M32.15,15.660580837556761L31.15,13.928530029987884L29.15,13.928530029987884L28.15,15.660580837556761L29.15,17.39263164512564L31.15,17.39263164512564Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M31.15,17.39263164512564L33.15,20.856733260263393" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M29.15,17.39263164512564L27.15,20.856733260263393" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M32.15,15.660580837556761L36.15,15.660580837556761" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M23.900000000000002,15.660580837556761L22.900000000000002,13.928530029987884L20.900000000000002,13.928530029987884L19.900000000000002,15.660580837556761L20.900000000000002,17.39263164512564L22.900000000000002,17.39263164512564Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M22.900000000000002,17.39263164512564L24.900000000000002,20.856733260263393" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M23.900000000000002,15.660580837556761L27.900000000000002,15.660580837556761" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M20.900000000000002,13.928530029987884L18.900000000000002,10.46442841485013" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M19.775000000000002,22.80529041877838L18.775000000000002,21.0732396112095L16.775000000000002,21.0732396112095L15.775000000000002,22.80529041877838L16.775000000000002,24.53734122634726L18.775000000000002,24.53734122634726Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M19.775000000000002,22.80529041877838L23.775000000000002,22.80529041877838" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M18.775000000000002,24.53734122634726L20.775000000000002,28.001442841485012" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M18.775000000000002,21.0732396112095L20.775000000000002,17.60913799607175" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M15.65,29.95L14.65,28.21794919243112L12.65,28.21794919243112L11.65,29.95L12.649999999999999,31.682050807568878L14.65,31.682050807568878Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M15.65,29.95L19.65,29.95" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M14.65,28.21794919243112L16.650000000000002,24.753847577293367" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M11.65,29.95L7.65,29.95" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M19.775,37.09470958122162L18.775,35.36265877365275L16.775,35.36265877365275L15.774999999999999,37.09470958122162L16.775,38.8267603887905L18.775,38.8267603887905Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M18.775,35.36265877365275L20.775,31.898557158514993" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M19.775,37.09470958122162L23.775,37.09470958122162" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M16.775,35.36265877365275L14.774999999999999,31.898557158514993" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M23.89999999999999,44.23941916244324L22.89999999999999,42.507368354874366L20.89999999999999,42.507368354874366L19.89999999999999,44.23941916244324L20.89999999999999,45.971469970012116L22.89999999999999,45.971469970012116Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M22.89999999999999,42.507368354874366L24.89999999999999,39.04326673973661" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M20.89999999999999,42.507368354874366L18.89999999999999,39.04326673973661" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M20.89999999999999,45.971469970012116L18.89999999999999,49.43557158514987" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M32.15,44.23941916244324L31.15,42.507368354874366L29.15,42.507368354874366L28.15,44.23941916244324L29.15,45.971469970012116L31.15,45.971469970012116Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M29.15,42.507368354874366L27.15,39.04326673973661" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M31.15,42.507368354874366L33.15,39.04326673973661" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M28.15,44.23941916244324L24.15,44.23941916244324" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M40.4,44.23941916244324L39.4,42.507368354874366L37.4,42.507368354874366L36.4,44.23941916244324L37.4,45.971469970012116L39.4,45.971469970012116Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M37.4,42.507368354874366L35.4,39.04326673973661" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M36.4,44.23941916244324L32.4,44.23941916244324" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M39.4,45.971469970012116L41.4,49.43557158514987" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="#000000" stroke="#ffffff" d="M44.525,37.09470958122162L43.525,35.36265877365275L41.525,35.36265877365275L40.525,37.09470958122162L41.525,38.8267603887905L43.525,38.8267603887905Z" fill-opacity="0" stroke-opacity="0.3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M41.525,35.36265877365275L39.525,31.898557158514993" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M40.525,37.09470958122162L36.525,37.09470958122162" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M43.525,35.36265877365275L45.525,31.898557158514993" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M41.525,38.8267603887905L39.525,42.290862003928254" stroke-opacity="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
		<div class="glyph_holder no_glyphs" data-bind="css: part.glyph_holder_css()">
			<span class="glyph glyph1 magi none" data-bind="css: part.glyph_classes()[0]"></span>
			<span class="glyph glyph2 magi none" data-bind="css: part.glyph_classes()[1]"></span>
			<span class="glyph glyph3 magi none" data-bind="css: part.glyph_classes()[2]"></span>

		</div>
	</div>
</div><!-- /ko -->
                            <!-- /ko -->
                        <!-- /ko -->
                    </div>
                    <!-- ko if: ss.part() -->
                    <div class="shop_price">
                        <i class="icon-mana"></i>
                        <span data-bind="text: ss.part().mana_cost().formatBig()">10.0K</span>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: ss.mode() === 'single' || ss.mode() === 'multi' --><!-- /ko -->
                    <div class="tier_selector" data-bind="visible: ss.max_tier() &gt; 1">
                        <button class="tier_down" data-bind="
                            disable: ss.tier() &lt;= 1,
                            click: function() {
                                ss.tier.inc(-1);
                                ss.restock();
                            }
                        " disabled="">-</button>
                        <span class="tier" data-bind="text: ss.tier()">1</span>
                        <button class="tier_up" data-bind="
                            disable: ss.tier() &gt;= ss.max_tier(),
                            click: function() {
                                ss.tier.inc(1);
                                ss.restock();
                            }
                        ">+</button>

                    </div>
                </div>
            <!-- /ko -->
        </div>

    </div>
<!-- /ko -->
	<div class="clear"></div>
	<div class="status_bar">
		<!-- ko template: { name: 'kot/status_bar.html', data: game, as: 'game' } --><table class="game_stats">
    <tbody>
        <tr>
            <th>Mana</th>
            <td>
                <i class="icon-mana"></i>
                <span class="mana" data-bind="text: game.mana().formatBig()">19.4K</span>
                (+<span class="generated" data-bind="text: game.mana_generated().formatBig()">50</span>
                -<span class="spent" data-bind="text: (function() {
                    var tot = 0;
                    _.each(game.spent_mana(), function(sm) {
                        tot += sm.val();
                    });
                    return tot;
                })().formatBig()

                ">0</span> =
                <span class="mana" data-bind="text: (game.net_mana() &gt;= 0 ?
                &#39;+&#39; : &#39;&#39;) + game.net_mana().formatBig()">+50</span>/tick)
            </td>
        </tr>
        <tr>
            <th>Arcana</th>
            <td>
                <span class="arcana" data-bind="text: game.arcana().formatBig()">0</span>
                (+<span class="generated" data-bind="text: game.arcana_generated().formatBig()">0</span>/tick)
            </td>



        </tr>
    </tbody>
</table><!-- /ko -->
	</div>
	<div class="panes">
		<div class="pane_chooser">
			<!-- ko foreach: {
				data: [
					{'pane' : 'stats', label: 'Reflect'},
					{pane: 'upgrades', label: 'Enchant'},
					{pane: 'talents', label: 'Ascend'},

				],
				as: 'pb'
			} -->
				<a class="pane_button active" data-bind="
					css: game.current_pane() === pb.pane ? &#39;active&#39; : &#39;&#39;,
					click: function() { game.current_pane(pb.pane); }
				">
					<span data-bind="text: pb.label">Reflect</span>
					<!-- ko if: pb.pane === 'talents' && game.level_after_ascend() - game.level() > 0 --><!-- /ko -->

				</a>
			
				<a class="pane_button" data-bind="
					css: game.current_pane() === pb.pane ? &#39;active&#39; : &#39;&#39;,
					click: function() { game.current_pane(pb.pane); }
				">
					<span data-bind="text: pb.label">Enchant</span>
					<!-- ko if: pb.pane === 'talents' && game.level_after_ascend() - game.level() > 0 --><!-- /ko -->

				</a>
			
				<a class="pane_button" data-bind="
					css: game.current_pane() === pb.pane ? &#39;active&#39; : &#39;&#39;,
					click: function() { game.current_pane(pb.pane); }
				">
					<span data-bind="text: pb.label">Ascend</span>
					<!-- ko if: pb.pane === 'talents' && game.level_after_ascend() - game.level() > 0 --><!-- /ko -->

				</a>
			<!-- /ko -->
			<a class="pane_button" data-bind="
				click: function() { game.save_game(); }
			">
				<span data-bind="text: &#39;Saved &#39; + game.save_ticks() + &#39; secs ago&#39;">Saved 29 secs ago</span>
			</a>

			<a class="pane_button" data-bind="
				click: function() { game.paused() ? game.unpause() : game.pause(); }
			">
				<span data-bind="text: game.paused() ? &#39;Paused&#39; : &#39;Pause&#39;">Pause</span>
			</a>


		</div>
		<!-- ko template: { name: 'kot/panes/stats_pane.html', data: game, as: 'game' } --><div class="pane game_stats" data-bind="visible: game.current_pane() === &#39;stats&#39;">
    <table class="game_stats">
        <tbody>
            <tr>
                <th>Experience</th>
                <td>
                    <span data-bind="text: game.experience().formatBig()">2.03Dc</span>
                </td>
            </tr>
            <tr>
                <th>Arcana</th>
                <td>
                    <span data-bind="text: game.arcana().formatBig()">0</span> (Arcana spent on Enchanting becomes exp)
                </td>
            </tr>
            <tr>
                <th>Level after ascent</th>
                <td>

                    <span data-bind="text: game.level_after_ascend()">101</span>
                </td>
            </tr>
            <tr>
                <th>Next Level At</th>
                <td>
                    <span data-bind="text: (game.exp_for_level(game.level_after_ascend() + 1) - game.experience()).formatBig()">2.03Dc</span> Arcana
                    (<span data-bind="text: (game.exp_for_level(game.level_after_ascend() + 1) - game.experience() - game.arcana_spent()).formatBig()">2.03Dc</span> more)
                </td>
            </tr>

            <tr>
                <td>Mana:</td>
                <td data-bind="text: game.mana().formatBig()">19.4K</td>
            </tr>
            <tr>
                <td>Generated/tick:</td>
                <td>
                    +<span data-bind="text: game.mana_generated().formatBig()">50</span>
                </td>
            </tr>
            <!-- ko foreach: {
                data: _.sortBy(game.spent_mana(), function(sm) {
                    return -1 * sm.val();
                }),
                as: 'sm'
                }
            --><!-- /ko -->
            <tr>
                <td>Net</td>
                <td data-bind="
                    text: (game.net_mana() &lt; 0 ? &#39;&#39; : &#39;+&#39;) + game.net_mana().formatBig()
                ">+50</td>
            </tr>
        </tbody>
    </table>
    <!-- ko if: game.focused_part() --><!-- /ko -->
</div>
<!-- /ko -->
		<!-- ko template: { name: 'kot/panes/shop_pane.html', data: game, as: 'game' } -->
<div class="pane shop" data-bind="visible: game.current_pane() === &#39;shop&#39;" style="display: none;">
    &nbsp;
    <div class="shop_slot_holder">
    &nbsp;
    <!-- ko if: game.chosen_shop_slot() --><!-- /ko -->
    </div>
    <div class="shop_settings">
        <table>
            <tbody>

                <tr>
                    <th>Type</th>
                    <td>
                    <!-- ko foreach: {
                        data: game.shop_slots(),
                        as: 'ss'
                    } -->
                        <a class="shop_choose_button" data-bind="
                            text: {
                                &#39;blank&#39;: &#39;Blank&#39;,
                                &#39;single&#39;: &#39;Simple&#39;,
                                &#39;multi&#39;: &#39;Complex&#39;,
                                &#39;fractal&#39;: &#39;Fractal&#39;,
                                &#39;conduit&#39;: &#39;Conduit&#39;,
                            }[ss.mode()],
                            css: game.chosen_shop_slot() === ss ? &#39;active&#39; : &#39;&#39;,
                            click: function() {game.chosen_shop_slot(ss); }
                        ">Blank</a>
                    
                        <a class="shop_choose_button" data-bind="
                            text: {
                                &#39;blank&#39;: &#39;Blank&#39;,
                                &#39;single&#39;: &#39;Simple&#39;,
                                &#39;multi&#39;: &#39;Complex&#39;,
                                &#39;fractal&#39;: &#39;Fractal&#39;,
                                &#39;conduit&#39;: &#39;Conduit&#39;,
                            }[ss.mode()],
                            css: game.chosen_shop_slot() === ss ? &#39;active&#39; : &#39;&#39;,
                            click: function() {game.chosen_shop_slot(ss); }
                        ">Simple</a>
                    
                        <a class="shop_choose_button" data-bind="
                            text: {
                                &#39;blank&#39;: &#39;Blank&#39;,
                                &#39;single&#39;: &#39;Simple&#39;,
                                &#39;multi&#39;: &#39;Complex&#39;,
                                &#39;fractal&#39;: &#39;Fractal&#39;,
                                &#39;conduit&#39;: &#39;Conduit&#39;,
                            }[ss.mode()],
                            css: game.chosen_shop_slot() === ss ? &#39;active&#39; : &#39;&#39;,
                            click: function() {game.chosen_shop_slot(ss); }
                        ">Complex</a>
                    
                        <a class="shop_choose_button" data-bind="
                            text: {
                                &#39;blank&#39;: &#39;Blank&#39;,
                                &#39;single&#39;: &#39;Simple&#39;,
                                &#39;multi&#39;: &#39;Complex&#39;,
                                &#39;fractal&#39;: &#39;Fractal&#39;,
                                &#39;conduit&#39;: &#39;Conduit&#39;,
                            }[ss.mode()],
                            css: game.chosen_shop_slot() === ss ? &#39;active&#39; : &#39;&#39;,
                            click: function() {game.chosen_shop_slot(ss); }
                        "></a>
                    
                        <a class="shop_choose_button" data-bind="
                            text: {
                                &#39;blank&#39;: &#39;Blank&#39;,
                                &#39;single&#39;: &#39;Simple&#39;,
                                &#39;multi&#39;: &#39;Complex&#39;,
                                &#39;fractal&#39;: &#39;Fractal&#39;,
                                &#39;conduit&#39;: &#39;Conduit&#39;,
                            }[ss.mode()],
                            css: game.chosen_shop_slot() === ss ? &#39;active&#39; : &#39;&#39;,
                            click: function() {game.chosen_shop_slot(ss); }
                        "></a>
                    
                        <a class="shop_choose_button" data-bind="
                            text: {
                                &#39;blank&#39;: &#39;Blank&#39;,
                                &#39;single&#39;: &#39;Simple&#39;,
                                &#39;multi&#39;: &#39;Complex&#39;,
                                &#39;fractal&#39;: &#39;Fractal&#39;,
                                &#39;conduit&#39;: &#39;Conduit&#39;,
                            }[ss.mode()],
                            css: game.chosen_shop_slot() === ss ? &#39;active&#39; : &#39;&#39;,
                            click: function() {game.chosen_shop_slot(ss); }
                        "></a>
                    
                        <a class="shop_choose_button" data-bind="
                            text: {
                                &#39;blank&#39;: &#39;Blank&#39;,
                                &#39;single&#39;: &#39;Simple&#39;,
                                &#39;multi&#39;: &#39;Complex&#39;,
                                &#39;fractal&#39;: &#39;Fractal&#39;,
                                &#39;conduit&#39;: &#39;Conduit&#39;,
                            }[ss.mode()],
                            css: game.chosen_shop_slot() === ss ? &#39;active&#39; : &#39;&#39;,
                            click: function() {game.chosen_shop_slot(ss); }
                        ">Conduit</a>
                    
                        <a class="shop_choose_button" data-bind="
                            text: {
                                &#39;blank&#39;: &#39;Blank&#39;,
                                &#39;single&#39;: &#39;Simple&#39;,
                                &#39;multi&#39;: &#39;Complex&#39;,
                                &#39;fractal&#39;: &#39;Fractal&#39;,
                                &#39;conduit&#39;: &#39;Conduit&#39;,
                            }[ss.mode()],
                            css: game.chosen_shop_slot() === ss ? &#39;active&#39; : &#39;&#39;,
                            click: function() {game.chosen_shop_slot(ss); }
                        ">Fractal</a>
                    <!-- /ko -->
                    </td>
                </tr>
                <!-- ko if: game.chosen_shop_slot() --><!-- /ko -->
            </tbody>
        </table>
    </div>
    <div class="clear"></div>
</div>
<!-- /ko -->
		<!-- ko template: { name: 'kot/panes/research_pane.html', data: game, as: 'game' } --><div class="pane research" data-bind="visible: game.current_pane() === &#39;research&#39;" style="display: none;">
    <table>
        <thead>
            <tr><th>Name</th>
            <th>Arcana</th>
            <th>Mana</th>
            <th>Description</th>
        </tr></thead>
        <tbody>
    <!-- ko foreach: {
        data: _.values(game.available_research()).concat(_.values(game.learned_research())),
        as: 'r'
    } -->

        <tr class="available_research can_buy" data-bind="
            click: function() {
                game.buy_research(r);
            },
            css: r.css(game),
        ">
            <td class="name" data-bind="text: r.name">Radiance</td>
            <td class="arcana" data-bind="text: r.arcana_requirement()">0</td>
            <td class="mana_cost" data-bind="text: r.mana_cost()">100</td>
            <td class="description" data-bind="text: r.description()">Unlock Radiance.  Increases mana generation on the part by a percentage.  Requires Generation to be on the part.</td>


        </tr>
    <!-- /ko -->
        </tbody>
    </table>
</div>
<!-- /ko -->
		<!-- ko template: { name: 'kot/panes/upgrades_pane.html', data: game, as: 'game' } --><div class="pane upgrades" data-bind="visible: game.current_pane() === &#39;upgrades&#39;" style="display: none;">
    <p>
        Spend Arcana to increase the effective value of a stat on all crystals.
    </p>
    <table class="shop_table noselect">
        <thead>
            <tr><th>Name</th>
            <th>Level</th>
            <th>Bonus</th>
            <th>Next Cost</th>
            <th>Next Bonus</th>
            <th>Description</th>
        </tr></thead>
        <tbody>
    <!-- ko foreach: {
        data: _.chain(game.upgrades_list()).filter(function(ug) { return ug.available(game); }).value(),
        as: 'ug'
    } -->

        <tr class="upgrade available_upgrade Glow cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Glow</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Glow</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Brilliance cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Brilliance</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Brilliance</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Radiance cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Radiance</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Radiance</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Waxing cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Waxing</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Waxing</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Conductivity cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Conductivity</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Conductivity</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Arcana cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Arcana</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Arcana</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Mystery cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Mystery</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Mystery</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Imbuing cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Imbuing</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Imbuing</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Infusing cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Infusing</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Infusing</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Vividity cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Vividity</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Vividity</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Shine cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Shine</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Shine</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Lens cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Lens</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Lens</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Prism cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Prism</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Prism</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Shimmer cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Shimmer</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Shimmer</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Resonance cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Resonance</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Resonance</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Purity cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Purity</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Purity</span>.
            </td>
        </tr>
    

        <tr class="upgrade available_upgrade Reflection cannot_buy" data-bind="
            click: function(data, ev) {
                if(ev.mouseButton != 2)
                    game.buy_upgrade(ug);
            },
            right_click: function(ev) {

                game.unbuy_upgrade(ug);

            },
            css: ug.css(game),
        ">
            <td class="name" data-bind="text: ug.name()">Reflection</td>
            <td class="points">
                <span data-bind="text: ug.points()">0</span>
                <!-- ko if: ug.max_points(game) !== Infinity --><!-- /ko -->
            </td>
            <td class="current_factor" data-bind="text: ug.boost_factor().formatByPercent()">0%</td>
            <td class="arcana_cost" data-bind="text: ug.arcana_cost().formatBig()">100</td>
            <td class="next_increase" data-bind="
                text: (ug.boost_factor(ug.points() + 1) - ug.boost_factor() + 1).formatByPercent()
            ">21%</td>
            <td class="description">
                Boosts the effective value of <span data-bind="text: ug.mech().props().noun">Reflection</span>.
            </td>
        </tr>
    <!-- /ko -->
        </tbody>
    </table>
</div>
<!-- /ko -->
		<!-- ko template: { name: 'kot/panes/talents_pane.html', data: game, as: 'game' } --><div class="pane talents" data-bind="visible: game.current_pane() === &#39;talents&#39;" style="display: none;">

    <div class="ascend_block">
        <p>
            <button data-bind="
                click: function() {
                    var conf = window.confirm(&#39;Ascending will destroy all crystals and upgrades, granting experience equal to your spent arcana.  Are you sure?  (Protip: your first ascent should be to level 3.)&#39;);
                    if(conf) game.ascend();
                }
            ">Ascend</button> now for
            <span data-bind="text: game.arcana_spent().formatBig()">0</span> experience, increasing level by
            <span data-bind="text: game.level_after_ascend() - game.level()">0</span>.
        </p>
        <p>
            You gain experience by enchanting, one point per arcana spent.
        </p>
        <p>
            <strong style="color: red;">You will LOSE ALL CRYSTALS AND UPGRADES when you ascend.</strong>
        </p>
    </div>

    <table class="stats_table horiz_stats">
        <thead>
            <tr>
                <th>Level</th>
                <th>Available Talent Points</th>
                <th>Next Level At</th>
                <th>Next Discovery</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td data-bind="text: game.level()">101</td>
                <td>
                    <span data-bind="text: game.unspent_tp()">73</span>
                    / <span data-bind="text: game.total_tp()">100</span>
                </td><td>
                    <span data-bind="text: (game.exp_for_level(game.level_after_ascend() + 1) - game.experience()).formatBig()">2.03Dc</span> Arcana
                    (<span data-bind="text: (game.exp_for_level(game.level_after_ascend() + 1) - game.experience() - game.arcana_spent()).formatBig()">2.03Dc</span> more)
                </td>

                <td>
                    <!-- ko if: !game.next_talent_discovered() -->
                        None
                    <!-- /ko -->
                    <!-- ko if: game.next_talent_discovered() --><!-- /ko -->

                </td>

            </tr>
        </tbody>

    </table>
    <div class="reset_block">
        <p>
            <button data-bind="
                click: function() {
                    var conf = window.confirm(&#39;You can reset your spent talent points, but it will force an ascension at the same time.  Are you sure?&#39;);
                    if(!conf) return;
                    _.each(game.talents_list(), function(tal) { tal.points(0); });
                    game.ascend();
                }
            ">Reset Points</button> (requires immediate ascent)
        </p>
    </div>

    <table class="shop_table">
        <thead>
            <tr><th>Name</th>
            <th>Level</th>
            <th>Bonus</th>
            <th>Description</th>
        </tr></thead>
        <tbody>
    <!-- ko foreach: {
        data: _.chain(game.talents_list()).filter(function(tal) { return tal.available(game); }).value(),
        as: 'tal'
    } -->

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Glow</td>
            <td class="points">
                <span data-bind="text: tal.points()">0</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">24</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Glow</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Brilliance</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">22</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Brilliance</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Radiance</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">24</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Radiance</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Waxing</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">25</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Waxing</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Conductivity</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">25</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Conductivity</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Arcana</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">21</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">41%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Arcana</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Mystery</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">22</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Mystery</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Imbuing</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">23</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Imbuing</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Infusing</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">23</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Infusing</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Vividity</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">20</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Vividity</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Power</td>
            <td class="points">
                <span data-bind="text: tal.points()">0</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">19</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) -->
                <span class="line">Unlocks the <span data-bind="text: Mechs[tal.unlocks_stat()].props().noun">Power</span> stat.</span>

                <!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) --><!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Shine</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">18</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Shine</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Lens</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">16</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Lens</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Prism</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">11</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Prism</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Shimmer</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">8</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Shimmer</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Seal</td>
            <td class="points">
                <span data-bind="text: tal.points()">0</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">6</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) -->
                <span class="line">Unlocks the <span data-bind="text: Mechs[tal.unlocks_stat()].props().noun">Seal</span> stat.</span>

                <!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) --><!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Resonance</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">13</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Resonance</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Purity</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">3</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Purity</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Gleam</td>
            <td class="points">
                <span data-bind="text: tal.points()">0</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">1</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) -->
                <span class="line">Unlocks the <span data-bind="text: Mechs[tal.unlocks_stat()].props().noun">Gleam</span> stat.</span>

                <!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) --><!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Reflection</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">21</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() -->
                    <span data-bind="text: tal.boost_factor().formatByPercent()">0%</span>
                <!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) -->
                <span class="line">
                    <span data-bind="if: tal.boost_mech_code() === tal.unlocks_stat() &amp;&amp; false"></span>Boosts
                    the <span data-bind="text: Mechs[tal.boost_mech_code()].props().noun">Reflection</span> stat.</span>
                <!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent cannot_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Bigger Inventory</td>
            <td class="points">
                <span data-bind="text: tal.points()">5</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">5</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) --><!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() -->
                <span class="line">Adds 3 inventory slots.</span>
                <!-- /ko -->
                <!-- ko if: tal.shop_mode() --><!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Better Blanks</td>
            <td class="points">
                <span data-bind="text: tal.points()">0</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">5</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) --><!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() -->
                    <span class="line">
                        <span data-bind="
                            text: {
                                &#39;single&#39;: &#39;Increases the maximum tier of Simple crystal you can conjure.&#39;,
                                &#39;multi&#39;: &#39;Increases the maximum tier of Complex crystal you can conjure.&#39;,
                                &#39;fractal&#39;: &#39;Increases the maximum tier of Fractal crystal you can conjure.  Higher tiers can be nested deeper.&#39;,
                                &#39;conduit&#39;: &#39;Unlocks conduits, which automatically move parts downstream.&#39;,
                                &#39;capacitor&#39;: &#39;Unlocks capacitors, which automatically move parts downstream when they\&#39;re done improving.&#39;,
                                &#39;relay&#39;: &#39;Unlocks relays, which redirect effects further downstream.&#39;,
                                &#39;hopper&#39;: &#39;Unlocks hoppers, which move crystals in and out of your inventory.&#39;
                            }[tal.shop_mode()]"></span>

                    </span>
                <!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Better Simple</td>
            <td class="points">
                <span data-bind="text: tal.points()">0</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">4</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) --><!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() -->
                    <span class="line">
                        <span data-bind="
                            text: {
                                &#39;single&#39;: &#39;Increases the maximum tier of Simple crystal you can conjure.&#39;,
                                &#39;multi&#39;: &#39;Increases the maximum tier of Complex crystal you can conjure.&#39;,
                                &#39;fractal&#39;: &#39;Increases the maximum tier of Fractal crystal you can conjure.  Higher tiers can be nested deeper.&#39;,
                                &#39;conduit&#39;: &#39;Unlocks conduits, which automatically move parts downstream.&#39;,
                                &#39;capacitor&#39;: &#39;Unlocks capacitors, which automatically move parts downstream when they\&#39;re done improving.&#39;,
                                &#39;relay&#39;: &#39;Unlocks relays, which redirect effects further downstream.&#39;,
                                &#39;hopper&#39;: &#39;Unlocks hoppers, which move crystals in and out of your inventory.&#39;
                            }[tal.shop_mode()]">Increases the maximum tier of Simple crystal you can conjure.</span>

                    </span>
                <!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Better Complex</td>
            <td class="points">
                <span data-bind="text: tal.points()">0</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">5</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) --><!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() -->
                    <span class="line">
                        <span data-bind="
                            text: {
                                &#39;single&#39;: &#39;Increases the maximum tier of Simple crystal you can conjure.&#39;,
                                &#39;multi&#39;: &#39;Increases the maximum tier of Complex crystal you can conjure.&#39;,
                                &#39;fractal&#39;: &#39;Increases the maximum tier of Fractal crystal you can conjure.  Higher tiers can be nested deeper.&#39;,
                                &#39;conduit&#39;: &#39;Unlocks conduits, which automatically move parts downstream.&#39;,
                                &#39;capacitor&#39;: &#39;Unlocks capacitors, which automatically move parts downstream when they\&#39;re done improving.&#39;,
                                &#39;relay&#39;: &#39;Unlocks relays, which redirect effects further downstream.&#39;,
                                &#39;hopper&#39;: &#39;Unlocks hoppers, which move crystals in and out of your inventory.&#39;
                            }[tal.shop_mode()]">Increases the maximum tier of Complex crystal you can conjure.</span>

                    </span>
                <!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent can_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Fractals</td>
            <td class="points">
                <span data-bind="text: tal.points()">2</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">5</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) --><!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() -->
                    <span class="line">
                        <span data-bind="
                            text: {
                                &#39;single&#39;: &#39;Increases the maximum tier of Simple crystal you can conjure.&#39;,
                                &#39;multi&#39;: &#39;Increases the maximum tier of Complex crystal you can conjure.&#39;,
                                &#39;fractal&#39;: &#39;Increases the maximum tier of Fractal crystal you can conjure.  Higher tiers can be nested deeper.&#39;,
                                &#39;conduit&#39;: &#39;Unlocks conduits, which automatically move parts downstream.&#39;,
                                &#39;capacitor&#39;: &#39;Unlocks capacitors, which automatically move parts downstream when they\&#39;re done improving.&#39;,
                                &#39;relay&#39;: &#39;Unlocks relays, which redirect effects further downstream.&#39;,
                                &#39;hopper&#39;: &#39;Unlocks hoppers, which move crystals in and out of your inventory.&#39;
                            }[tal.shop_mode()]">Increases the maximum tier of Fractal crystal you can conjure.  Higher tiers can be nested deeper.</span>

                    </span>
                <!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent cannot_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Conduits</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">1</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) --><!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() -->
                    <span class="line">
                        <span data-bind="
                            text: {
                                &#39;single&#39;: &#39;Increases the maximum tier of Simple crystal you can conjure.&#39;,
                                &#39;multi&#39;: &#39;Increases the maximum tier of Complex crystal you can conjure.&#39;,
                                &#39;fractal&#39;: &#39;Increases the maximum tier of Fractal crystal you can conjure.  Higher tiers can be nested deeper.&#39;,
                                &#39;conduit&#39;: &#39;Unlocks conduits, which automatically move parts downstream.&#39;,
                                &#39;capacitor&#39;: &#39;Unlocks capacitors, which automatically move parts downstream when they\&#39;re done improving.&#39;,
                                &#39;relay&#39;: &#39;Unlocks relays, which redirect effects further downstream.&#39;,
                                &#39;hopper&#39;: &#39;Unlocks hoppers, which move crystals in and out of your inventory.&#39;
                            }[tal.shop_mode()]">Unlocks conduits, which automatically move parts downstream.</span>

                    </span>
                <!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent cannot_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Hoppers</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">1</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) --><!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() -->
                    <span class="line">
                        <span data-bind="
                            text: {
                                &#39;single&#39;: &#39;Increases the maximum tier of Simple crystal you can conjure.&#39;,
                                &#39;multi&#39;: &#39;Increases the maximum tier of Complex crystal you can conjure.&#39;,
                                &#39;fractal&#39;: &#39;Increases the maximum tier of Fractal crystal you can conjure.  Higher tiers can be nested deeper.&#39;,
                                &#39;conduit&#39;: &#39;Unlocks conduits, which automatically move parts downstream.&#39;,
                                &#39;capacitor&#39;: &#39;Unlocks capacitors, which automatically move parts downstream when they\&#39;re done improving.&#39;,
                                &#39;relay&#39;: &#39;Unlocks relays, which redirect effects further downstream.&#39;,
                                &#39;hopper&#39;: &#39;Unlocks hoppers, which move crystals in and out of your inventory.&#39;
                            }[tal.shop_mode()]">Unlocks hoppers, which move crystals in and out of your inventory.</span>

                    </span>
                <!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent cannot_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Capacitors</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">1</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) --><!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() -->
                    <span class="line">
                        <span data-bind="
                            text: {
                                &#39;single&#39;: &#39;Increases the maximum tier of Simple crystal you can conjure.&#39;,
                                &#39;multi&#39;: &#39;Increases the maximum tier of Complex crystal you can conjure.&#39;,
                                &#39;fractal&#39;: &#39;Increases the maximum tier of Fractal crystal you can conjure.  Higher tiers can be nested deeper.&#39;,
                                &#39;conduit&#39;: &#39;Unlocks conduits, which automatically move parts downstream.&#39;,
                                &#39;capacitor&#39;: &#39;Unlocks capacitors, which automatically move parts downstream when they\&#39;re done improving.&#39;,
                                &#39;relay&#39;: &#39;Unlocks relays, which redirect effects further downstream.&#39;,
                                &#39;hopper&#39;: &#39;Unlocks hoppers, which move crystals in and out of your inventory.&#39;
                            }[tal.shop_mode()]">Unlocks capacitors, which automatically move parts downstream when they're done improving.</span>

                    </span>
                <!-- /ko -->
            </td>
        </tr>
    

        <tr class="available_talent cannot_buy" data-bind="
            click: function() {
                game.buy_talent(tal);
            },
            css: tal.css(game),
        ">
            <td class="name" data-bind="text: tal.name()">Relays</td>
            <td class="points">
                <span data-bind="text: tal.points()">1</span>
                <!-- ko if: tal.max_points(game) !== Infinity -->
                / <span data-bind="text: tal.max_points(game)">1</span>
                <!-- /ko -->
            </td>
            <td class="current_factor">
                <!-- ko if: tal.boost_mech_code() && tal.points() --><!-- /ko -->
            </td>
            <td class="description">
                <!-- ko if: tal.unlocks_stat() && (tal.boost_mech_code() !== tal.unlocks_stat() || tal.points() == 0) --><!-- /ko -->

                <!-- ko if: tal.boost_mech_code() && (tal.unlocks_stat() != tal.boost_mech_code() || tal.points() > 0) --><!-- /ko -->
                <!-- ko if: tal.adds_inventory_slots() --><!-- /ko -->
                <!-- ko if: tal.shop_mode() -->
                    <span class="line">
                        <span data-bind="
                            text: {
                                &#39;single&#39;: &#39;Increases the maximum tier of Simple crystal you can conjure.&#39;,
                                &#39;multi&#39;: &#39;Increases the maximum tier of Complex crystal you can conjure.&#39;,
                                &#39;fractal&#39;: &#39;Increases the maximum tier of Fractal crystal you can conjure.  Higher tiers can be nested deeper.&#39;,
                                &#39;conduit&#39;: &#39;Unlocks conduits, which automatically move parts downstream.&#39;,
                                &#39;capacitor&#39;: &#39;Unlocks capacitors, which automatically move parts downstream when they\&#39;re done improving.&#39;,
                                &#39;relay&#39;: &#39;Unlocks relays, which redirect effects further downstream.&#39;,
                                &#39;hopper&#39;: &#39;Unlocks hoppers, which move crystals in and out of your inventory.&#39;
                            }[tal.shop_mode()]">Unlocks relays, which redirect effects further downstream.</span>

                    </span>
                <!-- /ko -->
            </td>
        </tr>
    <!-- /ko -->
        </tbody>
    </table>
    <div class="full_reset">
        <button data-bind="click: _.bind(game.full_reset, game)">Full Reset</button> to lose all crystals, upgrades, AND EXPERIENCE, LEVELS, AND TALENTS.  This is a complete reset!  There is no going back!
    </div>
</div>
<!-- /ko -->


	</div>
</div>
</div>
	<div id="scene_holder"></div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-87727098-1', 'auto');
  ga('send', 'pageview');

</script>




<i title="Raphaël Colour Picker" style="display: none; color: transparent;"></i><div id="qtip-20" class="qtip qtip-default qtip-dark qtip-pos-tl" tracking="false" role="alert" aria-live="polite" aria-atomic="false" aria-describedby="qtip-20-content" aria-hidden="true" data-qtip-id="20" style="z-index: 15001;"><div class="qtip-titlebar"><div id="qtip-20-title" class="qtip-title" aria-atomic="true">Pure Shimmering Crystal of Imbuing</div></div><div class="qtip-content" id="qtip-20-content" aria-atomic="true"><!-- ko if: templateargs() --><!-- ko template: templateargs() --><div>
<table class="stat_table">
	<tbody>
	<!-- ko if: Ice.isa(part, CorePart) --><!-- /ko -->
	<!-- ko if: Ice.isa(part, FractalPart) --><!-- /ko -->
	<!-- ko if: Ice.isa(part, ConduitPart) --><!-- /ko -->
	<!-- ko if: Ice.isa(part, CapacitorPart) --><!-- /ko -->
	<!-- ko if: Ice.isa(part, HopperPart) --><!-- /ko -->
	<!-- ko if: Ice.isa(part, RelayPart) --><!-- /ko -->
	<tr class="stat_row">
		<td class="stat_noun">Tier</td>
		<td class="total">
			<span class="value" data-bind="text: part.tier()">1</span>
		</td>
		<td class="description">
			Determines maximum refinement.
		</td>
	</tr>



	<!-- ko foreach: {
	    data: _.sortBy(part.stats_list(), function(part) {
			return part.total() * -1;
		}),
		as: 'sv'
	} -->
	<tr class="stat_row">
		<td class="stat_noun" data-bind="text: sv.mech().props().noun">Imbuing</td>
		<td class="total">
			<span class="value" data-bind="text: sv.value().formatBig()">50</span>
			<span class="buff" data-bind="visible: sv.buff(), text: &#39;+&#39; + sv.buff().formatBig()" style="display: none;">+0</span>
		</td>
		<td class="description">
			<!-- ko if: sv.code() === 'Flaw' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Glow' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Brilliance' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Vividity' --><!-- /ko -->
			<!-- ko if: sv.code() === 'GenerationFlatModifier' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Radiance' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Conductivity' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Waxing' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Reflection' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Arcana' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Mystery' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Imbuing' -->
				Permanently increases maximum refinement on immediately downstream crystals by <span class="factor" data-bind="text: sv.factor()">3</span>/tick, up to 2x the normal value.  Costs mana while connected.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Infusing' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Infused' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Luster' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Power' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Shine' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Lens' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Prism' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Shimmer' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Seal' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Resonance' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Flux' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Purity' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Gleam' --><!-- /ko -->



		</td>

	</tr>
	
	<tr class="stat_row">
		<td class="stat_noun" data-bind="text: sv.mech().props().noun">Shimmer</td>
		<td class="total">
			<span class="value" data-bind="text: sv.value().formatBig()">33</span>
			<span class="buff" data-bind="visible: sv.buff(), text: &#39;+&#39; + sv.buff().formatBig()" style="display: none;">+0</span>
		</td>
		<td class="description">
			<!-- ko if: sv.code() === 'Flaw' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Glow' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Brilliance' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Vividity' --><!-- /ko -->
			<!-- ko if: sv.code() === 'GenerationFlatModifier' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Radiance' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Conductivity' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Waxing' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Reflection' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Arcana' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Mystery' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Imbuing' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Infusing' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Infused' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Luster' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Power' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Shine' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Lens' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Prism' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Shimmer' -->
				Increases all other stats of this crystal by <span class="factor" data-bind="text: sv.factor().formatByPercent()">404%</span> for each stat (additively) other than Shimmer on this crystal.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Seal' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Resonance' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Flux' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Purity' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Gleam' --><!-- /ko -->



		</td>

	</tr>
	
	<tr class="stat_row">
		<td class="stat_noun" data-bind="text: sv.mech().props().noun">Purity</td>
		<td class="total">
			<span class="value" data-bind="text: sv.value().formatBig()">17</span>
			<span class="buff" data-bind="visible: sv.buff(), text: &#39;+&#39; + sv.buff().formatBig()" style="display: none;">+0</span>
		</td>
		<td class="description">
			<!-- ko if: sv.code() === 'Flaw' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Glow' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Brilliance' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Vividity' --><!-- /ko -->
			<!-- ko if: sv.code() === 'GenerationFlatModifier' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Radiance' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Conductivity' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Waxing' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Reflection' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Arcana' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Mystery' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Imbuing' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Infusing' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Infused' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Luster' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Power' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Shine' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Lens' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Prism' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Shimmer' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Seal' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Resonance' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Flux' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Purity' -->
				Increases the highest stat on this crystal by <span class="factor" data-bind="text: sv.factor().formatByPercent()">134%</span>, if it is at least 50% of the total base stats on this crystal.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Gleam' --><!-- /ko -->



		</td>

	</tr>
	<!-- /ko -->

	<tr class="stat_row">
		<td class="stat_noun" data-bind="text: Ice.isa(part.container(), ShopSlot) ? &#39;Price&#39; : &#39;Value&#39;">Price</td>
		<td class="total">
			<span class="value" data-bind="text: part.mana_cost().formatBig()">2.00K</span>
		</td>
	</tr>
	<!-- ko if: !Ice.isa(part, CorePart) && !Ice.isa(part, FractalPart) && !Ice.isa(part, ConduitPart) && part.max_refinement() -->
	<tr class="stat_row">
		<td class="stat_noun">Refinement</td>
		<td colspan="2">
			<div class="progressbar_with_overlay refinement_bar">
				<div class="progressbar ui-progressbar ui-widget ui-widget-content ui-corner-all" data-bind="
					progressbar: {
						part:part,
						value: part.refinement,
						max: part.max_refinement
					}
				" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100">
				<div class="ui-progressbar-value ui-widget-header ui-corner-left ui-corner-right" style="width: 100%;"></div></div>
				<div class="overlay">
					<span data-bind="text: part.refinement().formatBig()">100</span> /
					<span data-bind="text: part.max_refinement().formatBig()">100</span>
				</div>
			</div>
		</td>
	</tr>

	<!-- /ko -->


	<!-- ko if: part.stats().Infused --><!-- /ko -->
	</tbody>
</table>
</div>
<!-- /ko --><!-- /ko --></div></div><div id="qtip-28" class="qtip qtip-default qtip-dark qtip-pos-tl" tracking="false" role="alert" aria-live="polite" aria-atomic="false" aria-describedby="qtip-28-content" aria-hidden="true" data-qtip-id="28" style="z-index: 15002;"><div class="qtip-titlebar"><div id="qtip-28-title" class="qtip-title" aria-atomic="true">Crystal of Resonance</div></div><div class="qtip-content" id="qtip-28-content" aria-atomic="true"><!-- ko if: templateargs() --><!-- ko template: templateargs() --><div>
<table class="stat_table">
	<tbody>
	<!-- ko if: Ice.isa(part, CorePart) --><!-- /ko -->
	<!-- ko if: Ice.isa(part, FractalPart) --><!-- /ko -->
	<!-- ko if: Ice.isa(part, ConduitPart) --><!-- /ko -->
	<!-- ko if: Ice.isa(part, CapacitorPart) --><!-- /ko -->
	<!-- ko if: Ice.isa(part, HopperPart) --><!-- /ko -->
	<!-- ko if: Ice.isa(part, RelayPart) --><!-- /ko -->
	<tr class="stat_row">
		<td class="stat_noun">Tier</td>
		<td class="total">
			<span class="value" data-bind="text: part.tier()">1</span>
		</td>
		<td class="description">
			Determines maximum refinement.
		</td>
	</tr>



	<!-- ko foreach: {
	    data: _.sortBy(part.stats_list(), function(part) {
			return part.total() * -1;
		}),
		as: 'sv'
	} -->
	<tr class="stat_row">
		<td class="stat_noun" data-bind="text: sv.mech().props().noun">Resonance</td>
		<td class="total">
			<span class="value" data-bind="text: sv.value().formatBig()">100</span>
			<span class="buff" data-bind="visible: sv.buff(), text: &#39;+&#39; + sv.buff().formatBig()" style="display: none;">+0</span>
		</td>
		<td class="description">
			<!-- ko if: sv.code() === 'Flaw' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Glow' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Brilliance' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Vividity' --><!-- /ko -->
			<!-- ko if: sv.code() === 'GenerationFlatModifier' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Radiance' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Conductivity' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Waxing' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Reflection' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Arcana' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Mystery' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Imbuing' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Infusing' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Infused' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Luster' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Power' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Shine' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Lens' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Prism' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Shimmer' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Seal' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Resonance' -->
				Permanently increases Flux on immediately downstream crystals by <span class="factor" data-bind="text: sv.factor()">6</span>/tick.  When a downstream crystal's Flux exceeds the single immediately upstream crystal's total base stats, the Flux is converted into the upstream crystal's base stats.
			<!-- /ko -->
			<!-- ko if: sv.code() === 'Flux' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Purity' --><!-- /ko -->
			<!-- ko if: sv.code() === 'Gleam' --><!-- /ko -->



		</td>

	</tr>
	<!-- /ko -->

	<tr class="stat_row">
		<td class="stat_noun" data-bind="text: Ice.isa(part.container(), ShopSlot) ? &#39;Price&#39; : &#39;Value&#39;">Price</td>
		<td class="total">
			<span class="value" data-bind="text: part.mana_cost().formatBig()">2.00K</span>
		</td>
	</tr>
	<!-- ko if: !Ice.isa(part, CorePart) && !Ice.isa(part, FractalPart) && !Ice.isa(part, ConduitPart) && part.max_refinement() -->
	<tr class="stat_row">
		<td class="stat_noun">Refinement</td>
		<td colspan="2">
			<div class="progressbar_with_overlay refinement_bar">
				<div class="progressbar ui-progressbar ui-widget ui-widget-content ui-corner-all" data-bind="
					progressbar: {
						part:part,
						value: part.refinement,
						max: part.max_refinement
					}
				" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100">
				<div class="ui-progressbar-value ui-widget-header ui-corner-left ui-corner-right" style="width: 100%;"></div></div>
				<div class="overlay">
					<span data-bind="text: part.refinement().formatBig()">100</span> /
					<span data-bind="text: part.max_refinement().formatBig()">100</span>
				</div>
			</div>
		</td>
	</tr>

	<!-- /ko -->


	<!-- ko if: part.stats().Infused --><!-- /ko -->
	</tbody>
</table>
</div>
<!-- /ko --><!-- /ko --></div></div></body></html>